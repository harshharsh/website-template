!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";var n=this;function t(){try{this.location=this.getBrowserWindowObject().self.location}catch(t){this.location=this.getBrowserWindowObject().location}}Array.prototype.forEach||(Array.prototype.forEach=function(t,e){e=e||window;for(var i=0;i<n.length;i++)t.call(e,n[i],i,n)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0==n)return!1;for(var r,s,e=0|e,o=Math.max(0<=e?e:n-Math.abs(e),0);o<n;){if((r=i[o])===(s=t)||"number"==typeof r&&"number"==typeof s&&isNaN(r)&&isNaN(s))return!0;o++}return!1}}),Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),i=e.length>>>0,n=arguments[1],r=0;r<i;r++){var s=e[r];if(t.call(n,s,r,e))return s}}),"undefined"!=typeof window&&window.NodeList&&!window.NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var c=new(t.prototype.getWindowLocation=function(){return this.location},t.prototype.getFuseDob=function(){return this.getBrowserWindowObject().performance.timing.navigationStart},t.prototype.getPackageMajorVersion=function(){return 2},t.prototype.getBrowserWindowObject=function(){return window.self},t.prototype.getQueryParam=function(e){return this.getWindowLocation().search.split(/[?&]/).filter(function(t){return""!==t}).map(function(t){return t.split("=")}).filter(function(t){return t[0]===e})[0]||[]},t),e=(i.prototype.updateSlotMetric=function(t,e,i){this.slotMetrics[t]||(this.slotMetrics[t]={}),this.slotMetrics[t].key=i},i.prototype.updateMetric=function(t,e){this.globalMetrics[t]=e},i.prototype.logResources=function(t){},i);function i(t,e,i){void 0===e&&(e={}),void 0===i&&(i={}),this.logger=t,this.globalMetrics=e,this.slotMetrics=i}var r=["debug","info","warn","error","off"],s=(o.prototype.setFuseDob=function(t){this.fuseDob=t},o.prototype.getTimestamp=function(){return this.fuseDob?" [".concat(Date.now()-this.fuseDob,"]"):""},o.prototype.callLogMethod=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];e[0]="[".concat(this.logName,"]-").concat(e[0]).concat(this.getTimestamp()),"warn"!==t&&"error"!==t||(1e3<=this.logs.length&&(this.logs=[]),this.logs.push({level:t,params:e})),"error"!==t&&r.indexOf(t)<r.indexOf(this.logLevel)||this.console[t].apply(null,e)},o.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.callLogMethod("error",t)},o.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.callLogMethod("warn",t)},o.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.callLogMethod("info",t)},o.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.callLogMethod("info",t)},o.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.callLogMethod("debug",t)},o.prototype.setLogLevel=function(t){this.logLevel=t},o.prototype.getLogLevel=function(){return this.logLevel},o.prototype.getLogs=function(){return this.logs},o);function o(t,e,i,n){void 0===n&&(n=n||"off"),this.console=t,this.logName=e,this.fuseDob=i,this.logLevel=n,this.logs=[]}var a,l,d=this&&this.__assign||function(){return(d=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},u=(p.prototype.getSlotProblems=function(){return this.slotProblems},p.prototype.addSlotProblem=function(t){1e3<=this.slotProblems.length&&(this.slotProblems=this.slotProblems.slice(100)),this.slotProblems.push(d(d({},t),{time:this.getElapsedTime()}))},p.prototype.getFuseDob=function(){return this.fuseDob},p.prototype.getElapsedTime=function(){return(new Date).getTime()-this.getFuseDob()},p.prototype.setStateStatus=function(t){var e,i=Date.now();this.states.push(((e={})[t]=!0,e.ts=i,e.load_time_ms=i-this.getFuseDob(),e))},p.prototype.addAdEvent=function(t,e){var i=Date.now();this.events.push({adEvent:t,requestID:e,ts:i,event_time_ms:i-this.getFuseDob()})},p);function p(t){this.fuseDob=t,this.states=[],this.events=[],this.slotProblems=[]}(pn=a=a||{}).Desktop="desktop",pn.Tablet="tablet",pn.Mobile="mobile",(ln=l=l||{}).Chrome="chrome",ln.Safari="safari",ln.Opera="opera",ln.Edge="edge",ln.IE11="ie11",ln.Firefox="firefox",ln.Other="other";var g=[{regex:/chrome|crios|crmo/i,browser:l.Chrome},{regex:/firefox|iceweasel|fxios/i,browser:l.Firefox},{regex:/safari|applewebkit/i,browser:l.Safari},{regex:/opera/i,browser:l.Opera},{regex:/opr\/|opios/i,browser:l.Opera},{regex:/\sedg\//i,browser:l.Edge},{regex:/edg([ea]|ios)/i,browser:l.Edge}],h=[{regex:/huawei/i,device:a.Mobile},{regex:/nexus\s*(?:7|8|9|10).*/i,device:a.Tablet},{regex:/ipad/i,device:a.Tablet},{regex:/tablet(?! pc)/i,device:a.Tablet},{regex:/(ipod|iphone)/i,device:a.Mobile},{regex:/nexus\s*[0-6].*/i,device:a.Mobile},{regex:/[^-]mobi/i,device:a.Mobile}],b=(f.prototype.parseDevice=function(){var e=this,t=h.filter(function(t){return t.regex.test(e.userAgent)});return 0<t.length?t[0].device:null!==(t=this.browserWindow.navigator.userAgentData)&&void 0!==t&&t.mobile?a.Mobile:a.Desktop},f.prototype.parseBrowser=function(){var e=this,t=g.filter(function(t){return t.regex.test(e.userAgent)});return 0<t.length?t[0].browser:l.Other},f.prototype.getDevice=function(){return this.device},f.prototype.getBrowser=function(){return this.browser},f);function f(t){this.browserWindow=t,this.userAgent=t.navigator.userAgent,this.device=this.parseDevice(),this.browser=this.parseBrowser()}var m=(y.prototype.recordAdUnitLoad=function(t){var e=t.baseUrl,i=t.fuseId,n=t.adUnitId,t=t.publicationId,t=this.makeUrl("success",{baseUrl:e,fuseId:i,adUnitId:n,publicationId:t});return this.logDetails(i,n,"success"),this.addLinkTag(t)},y.prototype.recordAdUnitError=function(t){var e=t.baseUrl,i=t.fuseId,n=t.adUnitId,t=t.publicationId,t=this.makeUrl("error",{baseUrl:e,fuseId:i,adUnitId:n,publicationId:t});return this.logDetails(i,n,"error"),this.addLinkTag(t)},y.prototype.makeUrl=function(t,e){var i=e.baseUrl,n=e.fuseId,r=e.adUnitId,e=e.publicationId;return"https:".concat(i,"2/").concat(n,"/telemetry/").concat(e,"/").concat(r,"/").concat(t,"/").concat(this.deviceInfo.getDevice(),"/").concat(this.deviceInfo.getBrowser())},y.prototype.addLinkTag=function(t){var e;this._registeredUrls[t]||((e=this.browserWindow.document.createElement("link")).href=t,e.rel="preload",e.as="fetch",this.browserWindow.document.getElementsByTagName("head")[0].appendChild(e),this._registeredUrls[t]=!0)},y.prototype.logDetails=function(t,e,i){this.logger.log("[STATS]: Record ".concat(i," event for fuse ").concat(t,", ad ").concat(e," on device ").concat(this.deviceInfo.getDevice()," and browser ").concat(this.deviceInfo.getBrowser()))},y);function y(t,e,i){this.deviceInfo=t,this.browserWindow=e,this.logger=i,this._registeredUrls={}}function S(){}var I=new(S.prototype.getResourceLogger=function(){return this.resourceLogger||(this.resourceLogger=new e(this.getLogger())),this.resourceLogger},S.prototype.getLogLevel=function(){if(this.isInDebugMode())return"debug";if(c.getQueryParam("fuse_log_level")&&c.getQueryParam("fuse_log_level")[1]){var t=c.getQueryParam("fuse_log_level")[1];return-1!==r.indexOf(t)?t:"off"}return"off"},S.prototype.getLogger=function(){return this.logger||(this.logger=new s(c.getBrowserWindowObject().console,this.getMainLogPrefix(),c.getFuseDob(),this.getLogLevel())),this.logger},S.prototype.getReporter=function(){return this.reporter||(this.reporter=new u(c.getFuseDob())),this.reporter},S.prototype.getDeviceInfo=function(){return this.deviceInfo||(this.deviceInfo=new b(c.getBrowserWindowObject())),this.deviceInfo},S.prototype.getTelemetry=function(){return this.telemetry||(this.telemetry=new m(this.getDeviceInfo(),c.getBrowserWindowObject(),this.getLogger())),this.telemetry},S.prototype.getMainLogPrefix=function(){return"FUSE"},S.prototype.isInDebugMode=function(){return"true"===c.getQueryParam("fuse_debug")[1]},S),v=c.getBrowserWindowObject(),A=function(t,e){var i;t.hasOwnProperty("url")&&((i=v.document.createElement("script")).async=!0,i.type="text/javascript","function"==typeof e&&(i.readyState?i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){e()}),i.src="https:".concat(t.url).concat(t.file),(t=v.document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,t))};function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t){return null==t}var T=I.getLogger(),C=function(){return R("fuseDelayQuantcastInit")},w=function(){return R("fuseDelayGptInit")},E=function(){return R("fuseDelayPrebidInit")},k=function(){return R("fuseDelayUamInit")},R=function(t){var e=c.getQueryParam(t)[1];if(e){var i=parseInt(e);return i||(T.info("[SETTINGS]: Could not parse ".concat(t," with value ").concat(e," as a number")),null)}},z=function(t){var e=c.getQueryParam(t)[1];if(_(e))return null;var i=/^(false|true|1|0)$/i.test(e)?Boolean(/^(true|1)$/i.test(e)):null;return _(i)&&T.info("[SETTINGS] Could not parse ".concat(t," with value: ").concat(e," as a boolean")),i};function D(t,e,i){t&&0<t?(T.info("[DELAY]: Delaying by ".concat(t,"ms to ").concat(e)),setTimeout(i,t)):i()}function P(t){var n=new RegExp("^fuse_(\\d+)_".concat(t,"(\\.\\w+|)$"),"i"),t=c.getWindowLocation().search.split(/[?&]/).filter(function(t){return""!==t}).map(function(t){return t.split("=")}).filter(function(t){return n.test(t[0])}),r=[];return t.forEach(function(t){var e,i=t[0].match(n);i[1]&&(e=decodeURIComponent(t[1]),"true"===t[1]?e=!0:"false"===t[1]&&(e=!1),t=i[1],void 0===r[t]&&(r[t]={}),i[2]&&(i=i[2].substring(1),r[t][i]=e))}),r}var O="ScrollTrigger",F=(N.prototype.destroy=function(){this.window.removeEventListener("scroll",this.triggeredCB,this.options)},N.prototype.enable=function(t,e){this.window=t.getWindow(),this.triggeredCB=e,this.window.addEventListener("scroll",e,this.options)},N);function N(){this.options={capture:!0,passive:!0}}var L=function(t,e,i,n,r){var s=t.top,o=t.bottom,a=t.left,l=t.right,c=t.width,t=t.height*r,r=c*r;return 0<=s+t+n&&0<=a+r&&o-t-n<=i&&l-r<=e};var G=function(t){return!0===t?0:t},B={viewable:L,checkInView:function(t,e,i,n){var r=e.getBoundingClientRect(),s=t.document.hidden,e=t.innerWidth||t.document.documentElement.clientWidth,t=t.innerHeight||t.document.documentElement.clientHeight,i=i/100,n=G(n),i=L(r,e,t,n,i);return!s&&i}},M="InView",U=(H.prototype.check=function(t,e){var i=e.slotRegistry.getSlot(t);if(i){var n=i.slotTemplate,t=e.getCurrentBreakpointName(),t=e.settings.getLazyDeviceToggle(n,t);return B.checkInView(e.getWindow(),i.element,50,t)}return!1},H);function H(){}var W=this&&this.__assign||function(){return(W=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},j={fuse_blocked_url:[],fuse_breakpoints:{m:960,s:600,xs:0},fuse_cdn:"//cdn.fuseplatform.net/publift/tags/",fuse_id:2716,fuse_industry:["IAB14","IAB19"],fuse_settings:{adblock:!1,amazonUam:{enabled:!1},blockthrough:!1,cmp:!0,confiant:!1,disableAutoLoadSlots:!1,disable_quantcast:!1,enableMiniScrollers:!1,headerbidding:1e3,identity:{enabled:!1},inskinWidth:1200,lazy:!1,prebid:{analytics:[],breakpoint_options:{m:{enabled:!0,timeout:1e3},s:{enabled:!0,timeout:1e3},xs:{enabled:!0,timeout:1e3}},defaultTimeout:1e3,enabled:!0,sendAllBids:!1},quickstart:!1,responsive:!0,strict_cmp:!1,useDomObserver:!1,publication_metadata:{publication_id:13,generation_version:"4.2914.0",generation_time:"2022-03-08T03:52:45.457Z",revision:"v3"}},fuse_slots:[{attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:30,sticky:!1},bids:[{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"120x600"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"160x600"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"300x250"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"300x600"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"336x280"}},{bidder:"33across",labelAny:["m"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"970x250"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"120x600",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"160x600",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x250",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x600",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"336x280",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m"],params:{size:"970x250",tagId:"cHVibGlmdC5jb20"}},{bidder:"appnexus",params:{placementId:"24086767"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"120x600"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"160x600"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x250"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x600"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"336x280"}},{bidder:"connectad",labelAny:["m"],params:{networkId:10047,siteId:1056584,size:"970x250"}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677216849_1486316_160x600",size:"160x600",zoneId:1486316}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677216849_1486321_300x250",size:"300x250",zoneId:1486321}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677216849_1486322_300x600",size:"300x600",zoneId:1486322}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677216849_1486323_336x280",size:"336x280",zoneId:1486323}},{bidder:"criteo",labelAny:["m"],params:{publisherSubId:"22677216849_1486326_970x250",size:"970x250",zoneId:1486326}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_1@120x600",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_1@160x600",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_1@300x250",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_1@300x600",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_1@336x280",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_1@970x250",publisherId:"156762"}},{bidder:"rubicon",labelAny:["m"],params:{accountId:"20884",siteId:"415152",sizes:[57],zoneId:"2340740"}},{bidder:"rubicon",labelAny:["s"],params:{accountId:"20884",siteId:"415152",sizes:[8,9,10,15,16],zoneId:"2340740"}},{bidder:"rubicon",labelAny:["xs"],params:{accountId:"20884",siteId:"415152",sizes:[8,9,10,15,16],zoneId:"2340740"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"120x600"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"160x600"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x250"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x600"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"336x280"}},{bidder:"triplelift",labelAny:["m"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"970x250"}}],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22677216849",insertCondition:{},interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{m:[[970,250]],s:[[120,600],[160,600],[300,250],[300,600],[336,280]],xs:[[120,600],[160,600],[300,250],[300,600],[336,280]]},sizes:[[120,600],[160,600],[300,250],[300,600],[336,280],[970,250]],slot:"/71161633,22672561285/INSTFTA_instafinsta/home_incontent_1",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1}},{attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:!1,sticky:!1},bids:[{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x100"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x250"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x50"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x100"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x50"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"336x280"}},{bidder:"33across",labelAny:["s"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"468x60"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x100",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x250",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x100",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"336x280",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s"],params:{size:"468x60",tagId:"cHVibGlmdC5jb20"}},{bidder:"appnexus",params:{placementId:"24086770"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x100"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x250"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x50"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x100"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x50"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"336x280"}},{bidder:"connectad",labelAny:["s"],params:{networkId:10047,siteId:1056584,size:"468x60"}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677217656_1486318_300x100",size:"300x100",zoneId:1486318}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677217656_1486321_300x250",size:"300x250",zoneId:1486321}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677217656_1486317_300x50",size:"300x50",zoneId:1486317}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677217656_1486320_320x100",size:"320x100",zoneId:1486320}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677217656_1486319_320x50",size:"320x50",zoneId:1486319}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677217656_1486323_336x280",size:"336x280",zoneId:1486323}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_3@300x100",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_3@300x250",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_3@300x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_3@320x100",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_3@320x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_3@336x280",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_3@468x60",publisherId:"156762"}},{bidder:"rubicon",labelAny:["s"],params:{accountId:"20884",siteId:"415152",sizes:[1,15,16,19,43,44,117],zoneId:"2340746"}},{bidder:"rubicon",labelAny:["xs"],params:{accountId:"20884",siteId:"415152",sizes:[15,16,19,43,44,117],zoneId:"2340746"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x100"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x250"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x50"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x100"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x50"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"336x280"}},{bidder:"triplelift",labelAny:["s"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"468x60"}}],id:"22677217656",sizeMapping:{m:[],s:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60]],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280]]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60]],slot:"/71161633,22672561285/INSTFTA_instafinsta/home_incontent_3"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:30,sticky:!1},bids:[{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"300x250"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"300x300"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"336x280"}},{bidder:"33across",labelAny:["m"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"970x250"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x250",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x300",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"336x280",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m"],params:{size:"970x250",tagId:"cHVibGlmdC5jb20"}},{bidder:"appnexus",params:{placementId:"24086766"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x250"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x300"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"336x280"}},{bidder:"connectad",labelAny:["m"],params:{networkId:10047,siteId:1056584,size:"970x250"}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677218928_1486321_300x250",size:"300x250",zoneId:1486321}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677218928_1486323_336x280",size:"336x280",zoneId:1486323}},{bidder:"criteo",labelAny:["m"],params:{publisherSubId:"22677218928_1486326_970x250",size:"970x250",zoneId:1486326}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_header@300x250",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_header@300x300",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_header@336x280",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_header@970x250",publisherId:"156762"}},{bidder:"rubicon",labelAny:["m"],params:{accountId:"20884",siteId:"415152",sizes:[57],zoneId:"2340738"}},{bidder:"rubicon",labelAny:["s"],params:{accountId:"20884",siteId:"415152",sizes:[15,16,48],zoneId:"2340738"}},{bidder:"rubicon",labelAny:["xs"],params:{accountId:"20884",siteId:"415152",sizes:[15,16,48],zoneId:"2340738"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x250"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x300"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"336x280"}},{bidder:"triplelift",labelAny:["m"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"970x250"}}],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22677218928",insertCondition:{},interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{m:[[970,250]],s:[[300,250],[300,300],[336,280]],xs:[[300,250],[300,300],[336,280]]},sizes:[[300,250],[300,300],[336,280],[970,250]],slot:"/71161633,22672561285/INSTFTA_instafinsta/home_header",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1}},{attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:!1,sticky:!1},bids:[{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x100"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x250"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x50"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x100"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x50"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"336x280"}},{bidder:"33across",labelAny:["s"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"468x60"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x100",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x250",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x100",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"336x280",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s"],params:{size:"468x60",tagId:"cHVibGlmdC5jb20"}},{bidder:"appnexus",params:{placementId:"24086769"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x100"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x250"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x50"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x100"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x50"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"336x280"}},{bidder:"connectad",labelAny:["s"],params:{networkId:10047,siteId:1056584,size:"468x60"}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677218931_1486318_300x100",size:"300x100",zoneId:1486318}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677218931_1486321_300x250",size:"300x250",zoneId:1486321}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677218931_1486317_300x50",size:"300x50",zoneId:1486317}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677218931_1486320_320x100",size:"320x100",zoneId:1486320}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677218931_1486319_320x50",size:"320x50",zoneId:1486319}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677218931_1486323_336x280",size:"336x280",zoneId:1486323}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_4@300x100",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_4@300x250",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_4@300x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_4@320x100",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_4@320x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_4@336x280",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_4@468x60",publisherId:"156762"}},{bidder:"rubicon",labelAny:["s"],params:{accountId:"20884",siteId:"415152",sizes:[1,15,16,19,43,44,117],zoneId:"2340744"}},{bidder:"rubicon",labelAny:["xs"],params:{accountId:"20884",siteId:"415152",sizes:[15,16,19,43,44,117],zoneId:"2340744"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x100"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x250"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x50"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x100"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x50"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"336x280"}},{bidder:"triplelift",labelAny:["s"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"468x60"}}],id:"22677218931",sizeMapping:{m:[],s:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60]],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280]]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60]],slot:"/71161633,22672561285/INSTFTA_instafinsta/home_incontent_4"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:30,sticky:!0},bids:[{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x50"}},{bidder:"33across",labelAny:["m"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"728x90"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m"],params:{size:"728x90",tagId:"cHVibGlmdC5jb20"}},{bidder:"appnexus",params:{placementId:"24086772"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x50"}},{bidder:"connectad",labelAny:["m"],params:{networkId:10047,siteId:1056584,size:"728x90"}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677218934_1486319_320x50",size:"320x50",zoneId:1486319}},{bidder:"criteo",labelAny:["m"],params:{publisherSubId:"22677218934_1486324_728x90",size:"728x90",zoneId:1486324}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/sticky_footer@320x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m"],params:{adSlot:"71161633/INSTFTA_instafinsta/sticky_footer@728x90",publisherId:"156762"}},{bidder:"rubicon",labelAny:["m"],params:{accountId:"20884",siteId:"415152",sizes:[2],zoneId:"2340750"}},{bidder:"rubicon",labelAny:["s"],params:{accountId:"20884",siteId:"415152",sizes:[43],zoneId:"2340750"}},{bidder:"rubicon",labelAny:["xs"],params:{accountId:"20884",siteId:"415152",sizes:[43],zoneId:"2340750"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x50"}},{bidder:"triplelift",labelAny:["m"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"728x90"}}],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22677218934",insertCondition:{},interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{m:[[728,90]],s:[[320,50]],xs:[[320,50]]},sizes:[[320,50],[728,90]],slot:"/71161633,22672561285/INSTFTA_instafinsta/sticky_footer",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!0}},{attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!0,lazy:!1,refresh:!1,sticky:!1},bids:[{bidder:"33across",labelAny:["m","s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x250"}},{bidder:"33across",labelAny:["m","s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x480"}},{bidder:"33across",labelAny:["m","s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"336x280"}},{bidder:"amx",labelAny:["m","s","xs"],params:{size:"300x250",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m","s","xs"],params:{size:"320x480",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m","s","xs"],params:{size:"336x280",tagId:"cHVibGlmdC5jb20"}},{bidder:"appnexus",params:{placementId:"24086773"}},{bidder:"connectad",labelAny:["m","s","xs"],params:{networkId:10047,siteId:1056584,size:"300x250"}},{bidder:"connectad",labelAny:["m","s","xs"],params:{networkId:10047,siteId:1056584,size:"320x480"}},{bidder:"connectad",labelAny:["m","s","xs"],params:{networkId:10047,siteId:1056584,size:"336x280"}},{bidder:"criteo",labelAny:["m","s","xs"],params:{publisherSubId:"22677218937_1486321_300x250",size:"300x250",zoneId:1486321}},{bidder:"criteo",labelAny:["m","s","xs"],params:{publisherSubId:"22677218937_1486323_336x280",size:"336x280",zoneId:1486323}},{bidder:"pubmatic",labelAny:["m","s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/web_interstitial@300x250",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m","s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/web_interstitial@320x480",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m","s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/web_interstitial@336x280",publisherId:"156762"}},{bidder:"triplelift",labelAny:["m","s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x250"}},{bidder:"triplelift",labelAny:["m","s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x480"}},{bidder:"triplelift",labelAny:["m","s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"336x280"}}],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22677218937",insertCondition:{},interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{l:[],m:[[300,250],[320,480],[336,280]],s:[[300,250],[320,480],[336,280]],xl:[],xs:[[300,250],[320,480],[336,280]]},sizes:[[300,250],[320,480],[336,280]],slot:"/71161633,22672561285/INSTFTA_instafinsta/web_interstitial",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1}},{attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:!1,sticky:!1},bids:[{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x100"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x250"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x50"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x100"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x50"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"336x280"}},{bidder:"33across",labelAny:["s"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"468x60"}},{bidder:"33across",labelAny:["m"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"728x90"}},{bidder:"33across",labelAny:["m"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"970x90"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x100",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x250",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x100",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"336x280",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s"],params:{size:"468x60",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m"],params:{size:"728x90",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m"],params:{size:"970x90",tagId:"cHVibGlmdC5jb20"}},{bidder:"appnexus",params:{placementId:"24086768"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x100"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x250"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x50"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x100"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x50"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"336x280"}},{bidder:"connectad",labelAny:["s"],params:{networkId:10047,siteId:1056584,size:"468x60"}},{bidder:"connectad",labelAny:["m"],params:{networkId:10047,siteId:1056584,size:"728x90"}},{bidder:"connectad",labelAny:["m"],params:{networkId:10047,siteId:1056584,size:"970x90"}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677787757_1486318_300x100",size:"300x100",zoneId:1486318}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677787757_1486321_300x250",size:"300x250",zoneId:1486321}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677787757_1486317_300x50",size:"300x50",zoneId:1486317}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677787757_1486320_320x100",size:"320x100",zoneId:1486320}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677787757_1486319_320x50",size:"320x50",zoneId:1486319}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677787757_1486323_336x280",size:"336x280",zoneId:1486323}},{bidder:"criteo",labelAny:["m"],params:{publisherSubId:"22677787757_1486324_728x90",size:"728x90",zoneId:1486324}},{bidder:"criteo",labelAny:["m"],params:{publisherSubId:"22677787757_1486325_970x90",size:"970x90",zoneId:1486325}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_2@300x100",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_2@300x250",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_2@300x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_2@320x100",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_2@320x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_2@336x280",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_2@468x60",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_2@728x90",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_incontent_2@970x90",publisherId:"156762"}},{bidder:"rubicon",labelAny:["m"],params:{accountId:"20884",siteId:"415152",sizes:[2,55],zoneId:"2340742"}},{bidder:"rubicon",labelAny:["s"],params:{accountId:"20884",siteId:"415152",sizes:[1,15,16,19,43,44,117],zoneId:"2340742"}},{bidder:"rubicon",labelAny:["xs"],params:{accountId:"20884",siteId:"415152",sizes:[15,16,19,43,44,117],zoneId:"2340742"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x100"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x250"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x50"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x100"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x50"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"336x280"}},{bidder:"triplelift",labelAny:["s"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"468x60"}},{bidder:"triplelift",labelAny:["m"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"728x90"}},{bidder:"triplelift",labelAny:["m"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"970x90"}}],id:"22677787757",sizeMapping:{m:[[728,90],[970,90]],s:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60]],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280]]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60],[728,90],[970,90]],slot:"/71161633,22672561285/INSTFTA_instafinsta/home_incontent_2"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:!1,sticky:!1},bids:[{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"120x600"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"160x600"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x100"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x250"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x50"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"300x600"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x100"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"320x50"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"336x280"}},{bidder:"33across",labelAny:["s"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"468x60"}},{bidder:"33across",labelAny:["m"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"728x90"}},{bidder:"33across",labelAny:["m"],params:{productId:"siab",siteId:"bl-6KiGgSr7ikerkHcnlxd",size:"970x90"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"120x600",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"160x600",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x100",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x250",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"300x600",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x100",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"336x280",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s"],params:{size:"468x60",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m"],params:{size:"728x90",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m"],params:{size:"970x90",tagId:"cHVibGlmdC5jb20"}},{bidder:"appnexus",params:{placementId:"24086771"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"120x600"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"160x600"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x100"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x250"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x50"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"300x600"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x100"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x50"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"336x280"}},{bidder:"connectad",labelAny:["s"],params:{networkId:10047,siteId:1056584,size:"468x60"}},{bidder:"connectad",labelAny:["m"],params:{networkId:10047,siteId:1056584,size:"728x90"}},{bidder:"connectad",labelAny:["m"],params:{networkId:10047,siteId:1056584,size:"970x90"}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677788678_1486316_160x600",size:"160x600",zoneId:1486316}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677788678_1486318_300x100",size:"300x100",zoneId:1486318}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677788678_1486321_300x250",size:"300x250",zoneId:1486321}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677788678_1486317_300x50",size:"300x50",zoneId:1486317}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677788678_1486322_300x600",size:"300x600",zoneId:1486322}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677788678_1486320_320x100",size:"320x100",zoneId:1486320}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677788678_1486319_320x50",size:"320x50",zoneId:1486319}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22677788678_1486323_336x280",size:"336x280",zoneId:1486323}},{bidder:"criteo",labelAny:["m"],params:{publisherSubId:"22677788678_1486324_728x90",size:"728x90",zoneId:1486324}},{bidder:"criteo",labelAny:["m"],params:{publisherSubId:"22677788678_1486325_970x90",size:"970x90",zoneId:1486325}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@120x600",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@160x600",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@300x100",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@300x250",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@300x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@300x600",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@320x100",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@320x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@336x280",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@468x60",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@728x90",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m"],params:{adSlot:"71161633/INSTFTA_instafinsta/home_footer@970x90",publisherId:"156762"}},{bidder:"rubicon",labelAny:["m"],params:{accountId:"20884",siteId:"415152",sizes:[2,55],zoneId:"2340748"}},{bidder:"rubicon",labelAny:["s"],params:{accountId:"20884",siteId:"415152",sizes:[1,8,9,10,15,16,19,43,44,117],zoneId:"2340748"}},{bidder:"rubicon",labelAny:["xs"],params:{accountId:"20884",siteId:"415152",sizes:[8,9,10,15,16,19,43,44,117],zoneId:"2340748"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"120x600"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"160x600"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x100"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x250"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x50"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"300x600"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x100"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x50"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"336x280"}},{bidder:"triplelift",labelAny:["s"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"468x60"}},{bidder:"triplelift",labelAny:["m"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"728x90"}},{bidder:"triplelift",labelAny:["m"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"970x90"}}],id:"22677788678",sizeMapping:{m:[[728,90],[970,90]],s:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[336,280],[468,60]],xs:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[336,280]]},sizes:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[336,280],[468,60],[728,90],[970,90]],slot:"/71161633,22672561285/INSTFTA_instafinsta/home_footer"},{attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,lazy:!1,miniscroller:!1,refresh:25,sticky:!1},bids:[{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"320x100"}},{bidder:"33across",labelAny:["s","xs"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"320x50"}},{bidder:"33across",labelAny:["m"],params:{productId:"siab",siteId:"6KiGgSr7ikerkHcnlxd",size:"728x90"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x100",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["s","xs"],params:{size:"320x50",tagId:"cHVibGlmdC5jb20"}},{bidder:"amx",labelAny:["m"],params:{size:"728x90",tagId:"cHVibGlmdC5jb20"}},{bidder:"appnexus",params:{placementId:"24108740"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x100"}},{bidder:"connectad",labelAny:["s","xs"],params:{networkId:10047,siteId:1056584,size:"320x50"}},{bidder:"connectad",labelAny:["m"],params:{networkId:10047,siteId:1056584,size:"728x90"}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22678652165_1486320_320x100",size:"320x100",zoneId:1486320}},{bidder:"criteo",labelAny:["s","xs"],params:{publisherSubId:"22678652165_1486319_320x50",size:"320x50",zoneId:1486319}},{bidder:"criteo",labelAny:["m"],params:{publisherSubId:"22678652165_1486324_728x90",size:"728x90",zoneId:1486324}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/sticky_header@320x100",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["s","xs"],params:{adSlot:"71161633/INSTFTA_instafinsta/sticky_header@320x50",publisherId:"156762"}},{bidder:"pubmatic",labelAny:["m"],params:{adSlot:"71161633/INSTFTA_instafinsta/sticky_header@728x90",publisherId:"156762"}},{bidder:"rubicon",labelAny:["m"],params:{accountId:"20884",siteId:"415152",sizes:[2],zoneId:"2340752"}},{bidder:"rubicon",labelAny:["s"],params:{accountId:"20884",siteId:"415152",sizes:[43,117],zoneId:"2340752"}},{bidder:"rubicon",labelAny:["xs"],params:{accountId:"20884",siteId:"415152",sizes:[43,117],zoneId:"2340752"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x100"}},{bidder:"triplelift",labelAny:["s","xs"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"320x50"}},{bidder:"triplelift",labelAny:["m"],params:{inventoryCode:"InstaFinsta_StandardDisplay",size:"728x90"}}],customLazy:{l:!1,m:!1,s:!1,xl:!1,xs:!1},dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22678652165",insertCondition:{},interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{m:[[728,90]],s:[[320,50],[320,100]],xs:[[320,50],[320,100]]},sizes:[[320,50],[320,100],[728,90]],slot:"/71161633,22672561285/INSTFTA_instafinsta/sticky_header",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1}}],fuse_tenant:"publift",fuse_uuid:"140f3398-412d-582d-b040-833962853aa7",supported_sizes:{l:[],m:[[300,250],[320,480],[336,280],[728,90],[970,90],[970,250]],s:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,300],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60]],xl:[],xs:[[120,600],[160,600],[300,50],[300,100],[300,250],[300,300],[300,600],[320,50],[320,100],[320,480],[336,280]]},tenantId:"DGKSPXNV53"},V=!1,q=j.fuse_settings,K=I.getLogger();function Q(){var r=this;this.fuseSettings=j.fuse_settings,this.cleaned_fuse_slots=!1,this.v2Compatibility={disableWidgetsRenderer:!1},this.isFluid=function(t){return Array.isArray(t)?"fluid"===t[0]:"fluid"===t},this.isUamEnabled=function(){return q.amazonUam&&q.amazonUam.enabled},this.isAdblockEnabled=function(){return 0<q.adblock},this.isResponsiveEnabled=function(){return q.responsive},this.getInskinWidth=function(){return q.inskinWidth},this.filterFluidSizes=function(t){return t.filter(function(t){return!r.isFluid(t)})},this.getCurrentSizeMapSizes=function(e,t){var i=(r.getFuseSlots().filter(function(t){return t.id===e})||[])[0];if(!i)return K.warn("[SLOTS]: getCurrentSizeMapSizes(): Could not find fuseSlot with id ".concat(e)),[];if(i.sizeMapping&&i.sizeMapping[t]){var n=r.filterFluidSizes(i.sizeMapping[t]);return 0===n.length&&K.debug("[SLOTS]: No non-fluid sizes available for ".concat(e," at current breakpoint: '").concat(t,"'")),n}return K.warn('[SLOTS]: Fuse slot "'.concat(e,'" has no sizemap at breakpoint ').concat(t,", sizeless prebid units may act strangely.")),r.filterFluidSizes(i.sizes||[])},this.getSupportedSizes=function(t){return j.supported_sizes[t]}}var J=new(Q.prototype.getUamSettings=function(){return q.amazonUam},Q.prototype.isPrebidEnabled=function(){return!V&&q.prebid&&q.prebid.enabled},Q.prototype.getPrebidSettings=function(){return q.prebid},Q.prototype.getFuseUUID=function(){return j.fuse_uuid},Q.prototype.getSco=function(){return j.sco},Q.prototype.getFuseId=function(){return j.fuse_id},Q.prototype.getUseTelemetry=function(){return Boolean(q.useTelemetry)},Q.prototype.isQuantcastEnabled=function(){return this.isCmpRequired()&&(_(q.disable_quantcast)||!q.disable_quantcast)},Q.prototype.isCmpRequired=function(){return q.cmp},Q.prototype.getGdprTimeoutMillis=function(){return 2e4},Q.prototype.getUspTimeoutMillis=function(){return 100},Q.prototype.getTagStartCutoffMs=function(){return R("fuseTagStartCutoffMs")||q.tagStartCutoffMs},Q.prototype.getPrebidDownloadCutoffMs=function(){return R("fusePrebidDownloadCutoffMs")||q.prebidDownloadCutoffMs},Q.prototype.getPrebidTagStartCutoffMs=function(){return R("fusePrebidTagStartCutoffMs")||q.prebidTagStartCutoffMs},Q.prototype.getUamTagStartCutoffMs=function(){return R("fuseUamTagStartCutoffMs")||q.uamTagStartCutoffMs},Q.prototype.getAuctionMaxSlots=function(){return R("fuseAuctionMaxSlots")||q.auctionMaxSlots||99},Q.prototype.isRefreshCountFromLoaded=function(){return z("fuseRefreshTimerFromLoaded")||q.refreshTimerFromLoaded||!1},Q.prototype.isIdentityEnabled=function(){return q.identity&&q.identity.enabled},Q.prototype.getIdentitySettings=function(){return q.identity},Q.prototype.isConfiantEnabled=function(){return q.confiant},Q.prototype.isBlockthroughEnabled=function(){return q.blockthrough},Q.prototype.isWidgetRendererEnabled=function(){return!this.v2Compatibility.disableWidgetsRenderer&&!q.disableWidgetsRenderer},Q.prototype.setDisableWidgetRenderer=function(){this.v2Compatibility.disableWidgetsRenderer=!0},Q.prototype.isStrictCmp=function(){return Boolean(q.strict_cmp)},Q.prototype.isRequestGdprPersonalisation=function(){return 2593!==this.getFuseId()},Q.prototype.setForceDisablePrebid=function(){K.log("[CONFIG]: Forcefully disabling prebid"),V=!0},Q.prototype.getBreakpoints=function(){var t={};return j.fuse_breakpoints.xl&&(t.xl=j.fuse_breakpoints.xl),j.fuse_breakpoints.l&&(t.l=j.fuse_breakpoints.l),t.m=j.fuse_breakpoints.m,t.s=j.fuse_breakpoints.s,t.xs=j.fuse_breakpoints.xs,t},Q.prototype.isMiniScrollersEnabled=function(){return Boolean(q.enableMiniScrollers)},Q.prototype.getTopStickyHeaderSelector=function(){return q.topStickyHeaderSelector},Q.prototype.getPrebidAnalytics=function(){return q.prebid_analytics||[]},Q.prototype.isDomObserverMode=function(){return z("fuse_dom")||Boolean(q.useDomObserver)},Q.prototype.getSlotRefWithoutMcm=function(t){var e=/^(\/\d*),(\d*)(\/.*)$/i;if(!1===e.test(t))return K.debug("[SETTINGS]: regExGamAdUnitRef.test(slotRef): ".concat(JSON.stringify(e.test(t)),", slotRef: ").concat(t)),t;K.debug("[SETTINGS]: regExGamAdUnitRef.test(slotRef): ".concat(JSON.stringify(e.test(t)),", slotRef: ").concat(t));e=e.exec(t);return K.debug("[SETTINGS]: slotRef: ".concat(t,", matches: ").concat(JSON.stringify(e))),"".concat(e[1]).concat(e[3])},Q.prototype.cleanSlotBasedOnMcmMode=function(t){var e=this.getSlotRefWithoutMcm(t.slot);return K.debug("[SETTINGS]: before: with MCM: ".concat(t.slot,", after: without MCM: ").concat(e)),W(W({},t),{slot:e})},Q.prototype.cleanSlotSizeMapping=function(t){var e={};return t.sizeMapping.xl&&(e.xl=t.sizeMapping.xl),t.sizeMapping.l&&(e.l=t.sizeMapping.l),e.m=t.sizeMapping.m,e.s=t.sizeMapping.s,e.xs=t.sizeMapping.xs,W(W({},t),{sizeMapping:e})},Q.prototype.getFuseSlots=function(){var e,i=this;return this.cleaned_fuse_slots||(e=z("fuseMcmOff"),j.fuse_slots=j.fuse_slots.map(function(t){return e&&(K.debug("[SETTINGS]: will".concat(e?"":" NOT"," remove MCM child reference from the slot ref - ").concat(t.slot)),t=i.cleanSlotBasedOnMcmMode(t)),i.isSlotLazy(t)&&(t.conditionConfig={type:"trigger",conditionName:M,triggers:[{triggerName:O,triggerParams:{}}],conditionParams:{}}),i.cleanSlotSizeMapping(t)}),this.cleaned_fuse_slots=!0),j.fuse_slots},Q.prototype.getSlotTemplate=function(e){return this.getFuseSlots().filter(function(t){return t.id===e})[0]},Q.prototype.isScanDOMOnPageLoad=function(){var t=q.disableAutoLoadSlots;return _(t)||!t},Q.prototype.isHeaderBiddingSlot=function(t){return t.bids&&0<t.bids.length},Q.prototype.isSlotLazy=function(t){return t.attributes.hasOwnProperty("lazy")&&!0===t.attributes.lazy},Q.prototype.isSlotWidget=function(t){var e;return(null===(e=t.attributes)||void 0===e?void 0:e.interscroller)||(null===(e=t.attributes)||void 0===e?void 0:e.sticky)||(null===(t=t.attributes)||void 0===t?void 0:t.dynamic)},Q.prototype.maxSlotHeightForBreakpoint=function(t,e){return null===(e=null===(t=t.sizeMapping)||void 0===t?void 0:t[e])||void 0===e?void 0:e.reduce(function(t,e){return e[1]>t?Number(e[1]):t},0)},Q.prototype.lazyDeviceToggle=function(t,e){return t.hasOwnProperty("customLazy")&&t.customLazy.hasOwnProperty(e)&&!1!==t.customLazy[e]?t.customLazy[e]:t.attributes.lazy},Q.prototype.getPrebidOptions=function(t){if(this.isPrebidEnabled()&&q.prebid.breakpoint_options){t=q.prebid.breakpoint_options[t];if(t)return t}return{enabled:this.isPrebidEnabled(),sendAllBids:!0===q.prebid.sendAllBids,timeout:q.prebid.defaultTimeout}},Q.prototype.isPrebidEnabledAtBP=function(t){return this.isPrebidEnabled()&&this.getPrebidOptions(t).enabled},Q.prototype.isUamEnabledAtBP=function(t){return this.isUamEnabled()&&void 0!==this.getHbTimeout(t)},Q.prototype.getHbTimeout=function(t){return this.getPrebidOptions(t).timeout},Q.prototype.isSlotEnabledForBreakpoint=function(t,e){t=this.getSlotTemplate(t);return!!t&&(t.sizeMapping&&0<(null===(e=t.sizeMapping[e])||void 0===e?void 0:e.length))},Q.prototype.getPublicationId=function(){return q.publication_metadata.publication_id},Q.prototype.getFuseCDN=function(){return j.fuse_cdn},Q.prototype.getBlockedUrls=function(){return j.fuse_blocked_url||[]},Q.prototype.getFuseIndustry=function(){return j.fuse_industry},Q.prototype.getFuseSettings=function(){return this.fuseSettings},Q.prototype.getEdgeHtmlMaxAdsRefreshLimit=function(){return this.getFuseSettings().edgeHtmlMaxAdsRefreshLimit||60},Q.prototype.getDefaultRefreshInterval=function(){return this.getFuseSettings().refresh},Q.prototype.getAccountSettings=function(){return j},Q.prototype.getV2CompatOverrides=function(){return this.v2Compatibility},Q.prototype.isTestCreatives=function(){return z("fuseTestCreatives")||!1},Q);function Y(t,e){t&&e.call()}var Z,X={isEdgeBrowser:function(t){return/[E]dge/.test(t.navigator.userAgent)}},$={name:"Google Publisher Tag",url:"//securepubads.g.doubleclick.net/tag/js/",file:"gpt.js"},tt=!1,et=I.getLogger(),it=c.getBrowserWindowObject(),nt=c.getWindowLocation(),rt=I.getReporter(),st=function(){var t=nt.host;return t.substring(t.length-40,t.length)},ot=function(){var t=nt.pathname;return t.substring(t.length-40,t.length)},at=function(){var t=nt.search;return t.substring(t.length-40,t.length)},lt=function(){for(var t=[],e=nt.pathname.split("/"),i=0;i<e.length;i+=1)e[i].length&&-1===e[i].indexOf(".")&&t.push(e[i]);return t},ct=function(){var e=nt.host,i=nt.pathname,n="false";return J.getBlockedUrls().forEach(function(t){-1<t.indexOf(e+i)&&(n="true")}),n};var dt=function(t){it.googletag&&it.googletag._loadStarted_?et.debug("[INIT]: GPT v".concat(Z.getVersion()," is already on the page, skip loading another copy")):A($,function(){et.debug("[INIT]: GPT ".concat(it.googletag&&it.googletag._loadStarted_?"v".concat(Z.getVersion()," is loaded"):"not loaded")),t()})},ut=function(){return it.googletag?it.googletag.cmd||(et.info("[GPT]: Initialised window.googletag.cmd as it was missing"),it.googletag.cmd=[]):it.googletag={cmd:[]},Z=it.googletag,it.googletag},pt=function(t){return ut().cmd.push(t)};function gt(t){return et.debug("[GPT]: googletag.display(".concat(t,")")),Z.display(t)}function ht(t){pt(function(){Object.keys(t).forEach(function(t){Z.pubads().clearTargeting(t)})})}function bt(n,r){pt(function(){var t,e,i=function(e){if(Z){if(e){var i,t=Z.pubads().getSlots(),n=t.filter(function(t){return 0<=e.indexOf(t.getSlotElementId())});return n.length!==e.length&&(i=t.map(function(t){return t.getSlotElementId()}),t=e.filter(function(t){return-1===i.indexOf(t)}),et.warn("Could not find a GPT slot for all fuse slots.\n      Missing Slots=".concat(JSON.stringify(t),",\n      All GPT Slots: ").concat(JSON.stringify(i)))),n}et.error("Called getGPTSlot() without a fuseSlotCode")}else et.error("Called getGPTSlot(".concat(e,") but googletag not defined"))}(n);i&&0!==i.length?(t=JSON.stringify(i.map(function(t){return t.getSlotElementId()})),!0===X.isEdgeBrowser(it)?(et.debug("[GC] will trigger GC for iFrames in Edge browser"),e=it.document.querySelectorAll("div[data-fuse] iframe"),new Promise(function(t){setTimeout(function(){try{t()}catch(t){}},5),e.forEach(function(t){t.addEventListener("load",function(){try{for(;this.contentWindow.lastChild;)this.contentWindow.removeChild(this.contentWindow.lastChild);et.debug("[GC]: cleaned iFrame contentWindow")}catch(t){et.error("[GC]: error in cleaning iFrame contentWindow => ".concat(t))}},{once:!0})}),e.forEach(function(t){t.setAttribute("src","about:blank")}),t()}).then(function(){try{CollectGarbage()}catch(t){et.error("[GC]: error in CollectGarbage => ".concat(t))}et.debug("[AUCTION][".concat(r,"]: Calling GPT for ").concat(t)),rt.addAdEvent("gpt_pubads_refresh_".concat(t),r),tt||(rt.setStateStatus("first_gpt_refresh"),tt=!0),Z.pubads().refresh(i)})):(et.debug("[AUCTION][".concat(r,"]: Calling GPT for ").concat(t)),rt.addAdEvent("gpt_pubads_refresh_".concat(t),r),tt||(rt.setStateStatus("first_gpt_refresh"),tt=!0),Z.pubads().refresh(i))):et.warn("[AUCTION][".concat(r,"]: Cancelled adserver request because no matching GPT slots found"))})}function ft(t,e){var i=t.creativeDivId;rt.addAdEvent("register_gpt_slot_".concat(i));var n,r,s,o=t.slotTemplate.slot,a=t.slotTemplate.sizes,l=Z.defineSlot(o,a,i);return l?(n=l,(r=t.slotTemplate).sizeMapping&&0!==Object.keys(r.sizeMapping).length?(s=Z.sizeMapping(),Object.keys(r.sizeMapping).forEach(function(t){var e=J.getBreakpoints()[t],i=r.sizeMapping[t];void 0!==e&&(et.debug("[GPT] Setting breakpoint for slot ".concat(r.slot," for size ").concat(t," with breakpoint ").concat(e," and mapping ").concat(i)),s.addSize([e,0],Dt(i)))}),n.defineSizeMapping(s.build())):et.debug("[GPT]: No fuse sizes defined for ".concat(r.id)),e.forEach(function(t){l.setTargeting(t.key,t.value)}),l.addService(Z.pubads())):et.warn("[GPT]: googletag.defineSlot(".concat(o,", ").concat(JSON.stringify(a),", ").concat(i,") returned null")),l}var mt=function(t,e){pt(function(){et.debug("[GPT]: Setting page targeting for [key: ".concat(t,", value: ").concat(e,"]")),Z.pubads().setTargeting(t,e)})},yt=function(){mt("fuse_profanity",ct()),mt("fuse_site",st()),mt("fuse_path",ot()),mt("fuse_query",at()),mt("fuse_category",lt()),mt("fuse_industry",J.getFuseIndustry()),mt("testmode","".concat(J.isTestCreatives()));var t=J.getInskinWidth(),t="".concat(it.screen.width>=t);mt("inskin_yes",t),mt("fuse_uuid",J.getFuseUUID()),mt("fuse_publication_id",J.getPublicationId().toString())},St=function(){Z.pubads().disableInitialLoad(),Z.pubads().collapseEmptyDivs(!0),Z.pubads().setCentering(!0),Z.pubads().enableSingleRequest(),Rt(),Et(),kt(),yt()};function It(t,e){var i=J.getFuseSlots().find(function(t){return t.attributes&&!0===t.attributes.interstitial});rt.setStateStatus("gpt_load_start"),ut(),dt(function(){rt.setStateStatus("gpt_load_finish"),t()}),pt(function(){et.debug("[GPT]: Queued fuse events beginning to execute"),rt.setStateStatus("gpt_queue_start"),Y(!J.isCmpRequired(),function(){return zt(!0)}),St(),Z.enableServices(),xt(i),e()})}function vt(t){Z.destroySlots(t)}var At,xt=function(t){if(t){var e=(t.interstitialAttributes||{minPageViews:0}).minPageViews;if(e){var i=window.sessionStorage,n=Number(i.getItem("fuse-page-views")||0);if(n<e)return void i.setItem("fuse-page-views","".concat(n+1));i.setItem("fuse-page-views","0")}t=Z.defineOutOfPageSlot(t.slot,Z.enums.OutOfPageFormat.INTERSTITIAL);t?(t.addService(Z.pubads()),Z.enableServices(),Z.display(t),Z.pubads().refresh([t])):et.warn("setInterstitialSlot(): googletag.defineOutOfPageSlot returned undefined")}},_t=function(t){pt(function(){Z.pubads().addEventListener("slotRenderEnded",t)})},Tt=function(t){pt(function(){Z.pubads().addEventListener("slotOnload",t)})},Ct=function(t){pt(function(){Z.pubads().addEventListener("slotResponseReceived",t)})},wt=function(t){pt(function(){Z.pubads().addEventListener("slotRequested",t)})},Et=function(){var e=!1;Z.pubads().addEventListener("slotOnload",function(t){e||(rt.setStateStatus("gpt_first_slot_loaded"),e=!0);t=t.slot.getSlotElementId();rt.addAdEvent("gpt_slot_loaded_".concat(t))})},kt=function(){var e=!1;Z.pubads().addEventListener("slotRenderEnded",function(t){e||(rt.setStateStatus("gpt_first_slot_render_ended"),e=!0);t=t.slot.getSlotElementId();rt.addAdEvent("gpt_slot_render_ended_".concat(t))})},Rt=function(){var e=!1;Z.pubads().addEventListener("impressionViewable",function(t){e||(rt.setStateStatus("gpt_first_impression_viewable"),e=!0);t=t.slot.getSlotElementId();et.debug("[EVENT]: AD_IMPRESSION_VIEW for ".concat(t)),rt.addAdEvent("gpt_impression_viewable_".concat(t))})},zt=function(t){t=t?0:1;et.info("[GPT]: googletag.pubads().setRequestNonPersonalizedAds(".concat(t,")")),it.googletag.pubads().setRequestNonPersonalizedAds(t)},Dt=function(t){return t.map(function(t){return J.isFluid(t)&&Array.isArray(t)?t[0]:t})},Pt=Object.freeze({__proto__:null,setDefaultTargetingAsync:yt,loadGPTLibrary:dt,defineSlot:ft,setTargetingAsync:mt,pushToGPTQue:pt,displayDiv:gt,refreshUnitsAsync:bt,applyStandardSettings:St,registerSlotRenderEndedCallbackAsync:_t,registerSlotOnLoadEndedCallbackAsync:Tt,registerSlotResponseReceivedCallbackAsync:Ct,registerSlotOnRequestedCallbackAsync:wt,getFuseCategories:lt,getFuseHost:st,getFusePath:ot,getFuseQuery:at,enableServices:function(){it.googletag.enableServices()},setAllowPersonalisedAds:zt,setInterstitialSlot:xt,destroySlots:vt,isGptReady:function(){return it.googletag&&it.googletag.apiReady},enable:It,clearGPTTargeting:ht}),Ot=function(e,i,n){function r(){var t=Date.now()-l;t<i&&0<=t?s=setTimeout(r,i-t):(s=null,n||(c=e.apply(a,o),s||(a=o=null)))}var s,o,a,l,c;return function(){a=this,o=arguments,l=Date.now();var t=n&&!s;return s=s||setTimeout(r,i),t&&(c=e.apply(a,o),a=o=null),c}};(pn=At=At||{}).xl="xl",pn.l="l",pn.m="m",pn.s="s",pn.xs="xs";var Ft=I.getLogger(),Nt=c.getBrowserWindowObject(),Lt=function(t){Nt.addEventListener("resize",Ot(t||function(){Ft.log("resized",Nt.innerWidth,Nt.innerHeight)},500))},Gt=function(t){var i,n=J.getBreakpoints(),r=t||Nt.innerWidth;return Object.keys(n).forEach(function(t){var e=n[t];e<=r&&(!i||e>i.size)&&(i={size:e,name:t})}),i};var Bt={watchForBreakpoints:function(i){var n=Nt.innerWidth,r=Gt(n).size;Lt(function(){n=Nt.innerWidth;var t=Gt(n),e=t.size,t=t.name;return e!==r?i(!0,t,r=e):i(!1,t,e)})},setResizeListener:Lt,getCurrentBreakpoint:Gt,isNotXsBreakpoint:function(){return Gt().name!==At.xs}},Mt=I.getLogger(),Ut={},Ht=0,Wt=0,jt=function(t){Ut[t]?(Ut[t].disconnect(),delete Ut[t],Mt.log("[DOM-OBSERVER] observer stopped for ".concat(t))):Mt.warn("[DOM-OBSERVER] observer not found for ".concat(t))},Vt={addNodeDeletionObserver:function(i,n){var t,r=i.code;Ut[r]?Mt.warn("[DOM-OBSERVER] node for ".concat(r," was already observed")):(Mt.log("[DOM-OBSERVER] new observer added ".concat(r)),(t=new MutationObserver(function(t){Mt.debug("[DOM-OBSERVER] Start for ".concat(r," Events:").concat(Ht," Time: ").concat(Wt));var e=Date.now();Ht++,t.forEach(function(t){"childList"===t.type&&0<t.removedNodes.length&&t.removedNodes.forEach(function(t){(t.id===r||t.querySelector&&t.querySelector("#".concat(r)))&&(jt(r),Mt.log("[DOM-OBSERVER] found deleted node ".concat(r)),n(i))})});e=Date.now()-e;Wt+=e,Mt.debug("[DOM-OBSERVER] End for ".concat(r," Took:").concat(e," Events:").concat(Ht," Time: ").concat(Wt))})).observe(document,{attributes:!1,childList:!0,subtree:!0}),Ut[r]=t),Mt.log("[DOM-OBSERVER] observer set to track deletion of ".concat(r))},stopObserver:jt,getObservers:function(){return Ut}},qt=I.getLogger(),Kt=[],Qt=function(i,t){var n=-1;Kt.forEach(function(t,e){-1===n&&t.key===i&&(n=e)}),qt.log("[TARGETING]: Updating custom targeting for [key: ".concat(i,", value: ").concat(t,"]")),-1<n?Kt[n].value=t:Kt.push({key:i,value:t}),mt(i,t)};var Jt={clearTargeting:function(){qt.info("[TARGETING] Clearing page targeting"),ht(Kt),Kt=[]},applyTargets:function(){yt(),Kt.forEach(function(t){mt(t.key,t.value)})},setTargeting:Qt,getTargeting:function(){return Kt},setTargetingMultiple:function(t){t.forEach(function(t){return Qt(t.key,t.value)})}};function Yt(){}var Zt,Xt=new(Yt.prototype.getPrebidGlobal=function(){return c.getBrowserWindowObject().fusePbjs||(c.getBrowserWindowObject().fusePbjs={que:[]}),c.getBrowserWindowObject().fusePbjs},Yt),$t=this&&this.__assign||function(){return($t=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},te=(ee.prototype.setup=function(){var t,e=this,i=this.browserWindow[this.userIdentityGlobal];i&&("object"===x(n=i)&&null!==n)&&(i.email||i.phoneNumber||i.emailHashes)?(t={placementID:this.placementId},i.email?t.email=i.email:i.phoneNumber?t.phoneNumber=i.phoneNumber:t.emailHashes=i.emailHashes):t={placementID:this.placementId,storageType:"localStorage",detectionType:"scrapeAndUrl",cssSelectors:["input[type=text]","input[type=email]"],detectionSubject:"all",urlParameter:"user_id",logging:"debug"};var n=document.createElement("script");n.src="https://ats.rlcdn.com/ats.js",n.onload=function(){e.browserWindow.ats.start(t)};i=this.browserWindow.document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)},ee.prototype.configPrebid=function(t){return $t($t({},t),{useSync:$t($t({},t.userSync),{userIds:[{name:"identityLink",params:{pid:this.placementId},storage:{type:"cookie",name:"idl_env",expires:7}}]})})},ee);function ee(t,e,i){this.browserWindow=t,this.userIdentityGlobal=e,this.placementId=i}function ie(t){var e=t/.835;return se.log("[PREBID]: Adjusting IX bid from Net to Gross from ".concat(t," to ").concat(e)),e}var ne={UserIdentity:te,enable:function(t){Zt||(Zt=new te(t,J.getFuseSettings().identity.userIdentityGlobal,J.getFuseSettings().identity.placementId)).setup()},getIdentityModule:function(){return Zt}},re=this&&this.__assign||function(){return(re=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},se=I.getLogger(),oe=c.getPackageMajorVersion(),ae=c.getBrowserWindowObject(),le=Xt.getPrebidGlobal(),ce=I.getReporter(),de={name:"Prebid.org",url:J.getFuseCDN()||"//cdn.publift.com/fuse/tag/",file:"prebid.js"},ue=function(){if(ce.setStateStatus("prebid_load_script_start"),!le||!le.libLoaded){var t=re({},de);return t.url+="".concat(oe,"/").concat(J.getFuseId(),"/"),A(t,function(){se.debug("[INIT]: Prebid ".concat(le&&le.libLoaded?"".concat(le.version," is loaded and ready"):"not loaded")),ce.setStateStatus("prebid_onload_received")})}se.warn("[INIT]: Prebid ".concat(le.version," is already loaded skip loading it again"))},pe=function(t){le&&le.que?le.que.push(function(){try{t.call()}catch(t){se.error("Error processing command :",t.message,t.stack)}}):se.error("[PREBID]: No prebid que available")},ge={setUserSync:function(t,e){t.userSync={syncEnabled:e,filterSettings:{iframe:{bidders:"*",filter:"include"}}}},setPriceGranularity:function(t){t.priceGranularity={buckets:[{max:3,increment:.01,precision:2},{max:10,increment:.1,precision:2},{max:50,increment:1,precision:2},{max:100,increment:10,precision:2}]}},setSizeConfig:function(n){var r;J.isResponsiveEnabled()&&(r=null,n.sizeConfig=[],Object.keys(J.getBreakpoints()).forEach(function(t){var e=J.getBreakpoints()[t],i=r-1;se.debug("[PREBID]: Configured breakpoint ".concat(t," ").concat(e,"px to ").concat(i)),n.sizeConfig.push({mediaQuery:"(min-width:".concat(e,"px)").concat(r?" and (max-width: ".concat(i,"px)"):""),sizesSupported:J.getSupportedSizes(t),labels:[t]}),r=e}))},setBidderSettings:function(t){t.bidderSettings={ix:{bidCpmAdjustment:ie}}},setScoSettings:function(t,e){e&&(t.schain={validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:e.asi,sid:e.sellerId,hp:1}]}},t.bidderSettings.schain=t.schain)}},he=function(){J.getPrebidAnalytics().forEach(function(t,e){0!==e&&se.warn("\n        [PREBID]: Having more than one analytics provider active may affect page performance.\n      "),le.enableAnalytics(t),se.log("[ANALYTICS]: Analytics enabled for ".concat(t.provider))})},be=function(t){var e={};return ge.setPriceGranularity(e),e.enableSendAllBids=t&&!0===t.sendAllBids,ge.setSizeConfig(e),ge.setUserSync(e,!0),ge.setBidderSettings(e),ge.setScoSettings(e,J.getSco()),e},fe=function(t){return se.debug("[PREBID]: Applied config settings"),le.setConfig(t),he(),t};var me={loadPrebidLibrary:ue,pushToPrebidQue:pe,setPrebidAdUnits:function(t){var e=Bt.getCurrentBreakpoint(),e=J.getCurrentSizeMapSizes(t.slotTemplate.id,e.name);se.log("[SLOTS]: Setting Prebid ad units for ".concat(t.creativeDivId," with sizes ").concat(JSON.stringify(e))),le.addAdUnits({code:t.creativeDivId,mediaTypes:{banner:{sizes:e}},bids:t.slotTemplate.bids})},getPrebidDefaultConfig:be,setPrebidConfig:fe,getPrebidUnitIndex:function(e){return le&&le.adUnits?le.adUnits.findIndex(function(t){return t.code===e}):void 0},getPrebidUnits:function(t){var i={};le.adUnits.forEach(function(t){return i[t.code]=t});var n={};return t.forEach(function(t){var e=i[t];e?n[t]=JSON.parse(JSON.stringify(e)):se.warn("[PREBID]: No prebid unit found for ".concat(t))}),n},enable:function(r){var s=ce.getElapsedTime();ue(),pe(function(){var t,e=ce.getElapsedTime()-s,i=J.getPrebidDownloadCutoffMs(),n=_(i)||e<=i;n?(se.debug("[PREBID] Started processing queued fuse tasks"),ce.setStateStatus("prebid_started_processing_queue"),ae.pbjs&&ae.pbjs.libLoaded?ae.pbjs.renderAd||(ae.pbjs.renderAd=le.renderAd):ae.pbjs=le,t=J.getPrebidSettings()&&!0===J.getPrebidSettings().sendAllBids,i=be({sendAllBids:t}),t=ne.getIdentityModule(),J.isIdentityEnabled()&&t&&(se.debug("[PREBID] Enabled identity module"),i=t.configPrebid(i)),fe(i),se.debug("[PREBID]: Enabled prebid with ".concat(J.getFuseSettings().headerbidding,"ms bid timeout"))):se.log("[PREBID]: Not enabling because library took ".concat(e,"ms to download")),r(n)})},reset:function(){this.prebidGlobal&&this.prebidGlobal.adUnits&&this.prebidGlobal.removeAdUnit()}},ye=(Se.prototype.on=function(t,e){return!!this.registry[t]&&(this.registry[t].push(e),!0)},Se.prototype.off=function(t,i){return!!this.registry[t]&&(this.registry[t].forEach(function(t,e){t===i&&(n=e)}),!(!n&&0!==n)&&(this.registry[t].splice(n,1),!0));var n},Se.prototype.once=function(e,i){var n=this;return n.on(e,function t(){i.apply(null,Array.prototype.slice.call(arguments)),n.off(e,t)})},Se.prototype.emit=function(e){var i=this;if(!this.registry[e])return!1;var n=Array.prototype.slice.call(arguments);n.shift();var t=this.registry[e].length;0<t?this.logger.info("[EVENT][".concat(e,"]: Fired, start processing ").concat(t," callbacks")):this.logger.debug("[EVENT][".concat(e,"]: Fired, no pending callbacks")),this.triggered[e]=!0,this.registry[e].forEach(function(t){try{t.apply(null,n)}catch(t){i.logger.error("[EVENT][".concat(e,"]: Caught exception in callback"),t.message,t.stack)}})},Se.prototype.isTriggered=function(t){return this.triggered[t]},Se);function Se(t,e){var i=this;this.logger=e,this.registry={},this.triggered={},t.forEach(function(t){i.registry[t]=[],i.triggered[t]=!1})}var Ie=this&&this.__assign||function(){return(Ie=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ve="onSlotsInitialised",Ae="onSlotCreated",xe=(_e.prototype.getElements=function(){var e=this,i={};return Object.keys(this.REGISTERED_SLOTS).forEach(function(t){t=e.REGISTERED_SLOTS[t];i[t.creativeDivId]=t.element}),i},_e.prototype.getSlotTemplates=function(){var e=this,i={};return Object.keys(this.REGISTERED_SLOTS).forEach(function(t){t=e.REGISTERED_SLOTS[t];i[t.creativeDivId]=t.slotTemplate}),i},_e.prototype.getSlotsForTemplateId=function(e){var i=this;return Object.keys(this.REGISTERED_SLOTS).filter(function(t){return i.REGISTERED_SLOTS[t].slotTemplate.id===e}).map(function(t){return i.REGISTERED_SLOTS[t]})},_e.prototype.getActiveSlots=function(){var e=this;return Object.keys(this.REGISTERED_SLOTS).filter(function(t){return e.REGISTERED_SLOTS[t].currentlyActive}).map(function(t){return e.REGISTERED_SLOTS[t]})},_e.prototype.getDeletedFuseCodes=function(){return this.DELETED_FUSE_DIVS},_e.prototype.getSlotInitEmitter=function(){return this.tagInitEmitter},_e.prototype.getSlotsCount=function(){return Object.keys(this.REGISTERED_SLOTS).length},_e.prototype.isDeletedSlot=function(t){return-1!==this.DELETED_FUSE_DIVS.indexOf(t)},_e.prototype.filterUndeleted=function(t,i){var n=this;return t.filter(function(t){var e=!n.isDeletedSlot(t);return!e&&i&&i(t),e})},_e.prototype.reset=function(){var e=this;Object.keys(this.REGISTERED_SLOTS).forEach(function(t){e.isDeletedSlot(t)&&e.logger.log("[EVENT]: resetSlots() unit already deleted ".concat(t)),e.DELETED_FUSE_DIVS.push(t)}),Object.keys(this.SLOT_ACTIVATOR).forEach(function(t){e.SLOT_ACTIVATOR[t].destroy()}),this.REGISTERED_SLOTS={},this.SLOT_ACTIVATOR={},this.clearFuseSkins()},_e.prototype.registeredSlotConfig=function(i,n,t){return{creativeDivId:i,element:t,slotTemplate:n,isInView:function(t){var e=n.attributes.interscroller?t.document.querySelector(".publift-widget-".concat(n.id,"-container")):t.document.getElementById(i);return B.checkInView(t,e,50,!1)}}},_e.prototype.registerActiveSlot=function(t,e,i,n){i=Ie(Ie({},this.registeredSlotConfig(t,e,i)),{initialisedActive:!0,activatedAt:this.reporter.getElapsedTime(),currentlyActive:!0,storedAt:this.reporter.getElapsedTime()});return this.REGISTERED_SLOTS[t]=i,this.enablePartners(i,n),i},_e.prototype.registerInactiveSlot=function(t,e,i,n){i=Ie(Ie({},this.registeredSlotConfig(t,e,i)),{activatedAt:null,initialisedActive:!1,currentlyActive:!1,storedAt:this.reporter.getElapsedTime()});return this.REGISTERED_SLOTS[t]=i,this.SLOT_ACTIVATOR[t]=n,i},_e.prototype.activateInactiveSlot=function(t,e,i){var n;this.REGISTERED_SLOTS[t]&&!0===this.REGISTERED_SLOTS[t].currentlyActive?this.logger.warn("[SLOTS][".concat(t,"]: Skipped activation because the unit was already activated")):(n=this.REGISTERED_SLOTS[t],this.SLOT_ACTIVATOR[t].destroy(),n.currentlyActive=!0,n.activatedAt=this.reporter.getElapsedTime(),this.enablePartners(n,e),i([n]))},_e.prototype.enablePartners=function(t,e){this.enableGptAsync(t,e),this.settings.isHeaderBiddingSlot(t.slotTemplate)?this.enablePrebidAsync(t):this.logger.debug("[SLOTS]: Skip prebid registration for ".concat(t.creativeDivId," because headerbidding not enabled"))},_e.prototype.enablePrebidAsync=function(t){var e=this;me.pushToPrebidQue(function(){e.isDeletedSlot(t.creativeDivId)?e.logger.log("[SLOTS]: Skip prebid registration for deleted unit ".concat(t.creativeDivId)):me.setPrebidAdUnits(t)})},_e.prototype.enableGptAsync=function(t,e){var i=this;pt(function(){i.isDeletedSlot(t.creativeDivId)?i.logger.log("[SLOTS]: Skip registration for deleted unit ".concat(t.creativeDivId)):(i.gptSlotRegistry.add(t.slotTemplate.id,ft(t,e)),gt(t.creativeDivId))})},_e.prototype.getFuseElement=function(t){t=this.REGISTERED_SLOTS[t];if(t)return t.element},_e.prototype.deleteSlot=function(t){this.logger.debug("[SLOTS][".concat(t,"]: Deleting slot")),this.DELETED_FUSE_DIVS.push(t),delete this.REGISTERED_SLOTS[t],this.SLOT_ACTIVATOR[t].destroy(),delete this.SLOT_ACTIVATOR[t]},_e.prototype.getSlot=function(t){return this.REGISTERED_SLOTS[t]},_e.prototype.buildActivator=function(t,e,i,n,r){var s=this;return this.conditionFactory.buildActivator(e,t,i,function(){return s.activateInactiveSlot(t,n,r)})},_e.prototype.registerFuseSlot=function(t,e,i,n,r,s,o){var a;return this.settings.isDomObserverMode()&&(Vt.addNodeDeletionObserver(i,this.fuseNodeDeletionCallback),this.resourceLogger.logResources("addNodeDeletionObserver")),r?(this.logger.log("[SLOTS][".concat(t,"]: Registering as active because it is forced")),a=this.registerActiveSlot(t,i,e,n)):i.conditionConfig?(o=this.buildActivator(t,i.conditionConfig,s,n,o)).checkCondition()?(this.logger.log("[SLOTS][".concat(t,"]: Registering as active because conditions already satisfied")),a=this.registerActiveSlot(t,i,e,n)):(this.logger.log("[SLOTS][".concat(t,"]: Registering as inactive and enabling triggers")),a=this.registerInactiveSlot(t,i,e,o),o.enableTriggers()):(this.logger.log("[SLOTS][".concat(t,"]: Registering as active because no conditions defined")),a=this.registerActiveSlot(t,i,e,n)),this.tagInitEmitter.emit(Ae),a},_e.prototype.register=function(t,e,i,n){var r=this,t=t.map(function(t){return r.registerFuseSlot(t.elementId,t.element,t.slotTemplate,t.targeting,i,e,n)});return this.logger.debug("[SLOTS]: Registered ".concat(t.length," slots")),this.tagInitEmitter.emit(ve),t},_e.prototype.fuseNodeDeletionCallback=function(t){var e=t.creativeDivId,t=t.slotTemplate;this.logger.log("[DOM-OBSERVER] run node deletion callback for ".concat(e)),this.isDeletedSlot(e)?this.logger.log("[DOM-OBSERVER] unit already deleted ".concat(e)):(this.gptSlotRegistry.purgeByElement(t.id,e),this.deleteSlot(e),this.resourceLogger.logResources("fuseNodeDeletionCallback"),this.prebidGlobal&&this.prebidGlobal.adUnits&&this.prebidGlobal.adUnits.length&&this.prebidGlobal.removeAdUnit(e)),this.resourceLogger.logResources("resetSlots")},_e.prototype.clearFuseSkins=function(){this.logger.debug("[DOM]: Clearing fuse skins");for(var t=this.browserWindow.document.querySelectorAll("div.fuse-custom-skin"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])},_e);function _e(t,e,i,n,r,s,o,a){this.prebidGlobal=t,this.logger=e,this.reporter=i,this.browserWindow=n,this.resourceLogger=r,this.gptSlotRegistry=s,this.settings=o,this.conditionFactory=a,this.DELETED_FUSE_DIVS=[],this.REGISTERED_SLOTS={},this.SLOT_ACTIVATOR={},this.tagInitEmitter=new ye([ve,Ae],this.logger)}var Te=(Ce.prototype.add=function(t,e){var i=this,n=Ce.getLCTemplateId(t);Array.isArray(this.slots[n])||(this.slots[n]=[]),this.logger.debug("[GPT-REGISTRY]: Added ".concat(n)),this.slots[n].push(e);var r=this.templateTargetings[n];r?(Object.keys(r).forEach(function(t){e.setTargeting(t,r[t]),i.logger.debug("[GPT-REGISTRY]: Set targeting. slotTemplateId: ".concat(n,", gpt slot id: ").concat(e.getSlotElementId(),", key: ").concat(t,", value: ").concat(r[t]))}),this.logger.debug("[GPT-REGISTRY]: Applied targeting for ".concat(n," on newly added gpt slot - id: ").concat(e.getSlotElementId()))):this.logger.debug("[GPT-REGISTRY]: No template targeting set for slotTemplateId: ".concat(n))},Ce.prototype.purgeAll=function(){var e=this;Object.keys(this.slots).forEach(function(t){return e.purge(t)})},Ce.getLCTemplateId=function(t){return t.toLowerCase()},Ce.prototype.purge=function(t){var e=Ce.getLCTemplateId(t);this.logger.debug("[GPT REGISTRY]: Purging ".concat(e));t=this.slots[e];t&&(this.destroySlotsFunc(t),delete this.slots[e],delete this.templateTargetings[e])},Ce.prototype.purgeByElement=function(t,e){var i=this.getSlots(t)||[],n=i.find(function(t){return t.getSlotElementId()===e});n?(this.destroySlotsFunc([n]),this.slots[Ce.getLCTemplateId(t)]=i.filter(function(t){return t.getSlotElementId()!==e})):this.logger.warn("[GPT-REGISTRY]: No slot found for key: ".concat(t," code: ").concat(e))},Ce.prototype.getSlotsLength=function(){return Object.keys(this.slots).length},Ce.prototype.getSlots=function(t){return t&&"string"==typeof t&&Array.isArray(this.slots[Ce.getLCTemplateId(t)])?this.slots[Ce.getLCTemplateId(t)]:[]},Ce.prototype.addTemplateTargetings=function(t,e,i){t=Ce.getLCTemplateId(t);this.templateTargetings[t]||(this.templateTargetings[t]={}),this.templateTargetings[t][e]=i},Ce.prototype.getTemplateTargetings=function(t){t=Ce.getLCTemplateId(t);return this.templateTargetings[t]||null},Ce.prototype.setSlotTargetingById=function(e,i,n){var r=this;this.addTemplateTargetings(e,i,n),this.logger.debug("[GPT-REGISTRY]: Template targeting set. slotTemplateId: ".concat(e,", key: ").concat(i,", value: ").concat(JSON.stringify(n))),this.getSlots(e).forEach(function(t){try{t.setTargeting(i,n),r.logger.debug("[GPT-REGISTRY]: Applied template targetings. slot id: ".concat(t.getSlotElementId(),", key: ").concat(i,", value: ").concat(JSON.stringify(n)))}catch(t){r.logger.error("[GPT-REGISTRY]: Error occurred while individually setTargeting for slot ".concat(e,"."),t.message,t.stack)}})},Ce);function Ce(t,e){var i=this;this.logger=t,this.gptDestroySlots=e,this.templateTargetings={},this.slots={},this.destroySlotsFunc=void 0,this.destroySlotsFunc=function(t){var e=t.map(function(t){return t.getSlotElementId});i.logger.debug("[GPT-REGISTRY]: Calling googletag.destroySlots(".concat(JSON.stringify(e),")")),i.gptDestroySlots(t)}}function we(){}var Ee=new(we.prototype.getGptSlotRegistry=function(){return this.gptSlotRegistry||(this.gptSlotRegistry=new Te(I.getLogger(),vt)),this.gptSlotRegistry},we);var ke=(Re.prototype.plan=function(t){var e=this,i="".concat(++this.auctionCounter),n=Bt.getCurrentBreakpoint().name,r=this.settings.getHbTimeout(n),s=void 0!==r,o=this.settings.isUamEnabledAtBP(n)&&s,a=this.settings.isPrebidEnabledAtBP(n)&&s;o||a||this.logger.debug("[PLANNER][".concat(i,"]: Headerbidding is not configured at breakpoint ").concat(n));var l=this.settings.getAuctionMaxSlots(),s=this.sortSlotsByViewport(i,t).slice(0,l),t=s.filter(function(t){return e.settings.isHeaderBiddingSlot(t.slotTemplate)}),l=0<t.length;return{auctionId:i,usePrebid:this.isUsePrebid(a,i,l),useUam:this.isUseUam(o,i,l),hbTimeout:r,hbSlots:t,breakpointName:n,gptSlots:s}},Re.prototype.sortSlotsByViewport=function(t,e){var i=e.sort(function(t,e){t=t.element.getBoundingClientRect(),e=e.element.getBoundingClientRect();return t.top-e.top}),e=i.map(function(t){return t.creativeDivId});return this.logger.debug("[PLANNER][".concat(t,"]: Slot priority order: ").concat(JSON.stringify(e))),i},Re.prototype.isUseUam=function(t,e,i){return t&&!this.initManager.isUamReady()?this.logger.info("[AUCTION][".concat(e,"]: UAM has not finished loading and will be excluded from the auction")):t&&!i&&this.logger.debug("[AUCTION][".concat(e,"]: UAM has been excluded from the auction because no headerbidding slots are enabled")),t&&this.initManager.isUamReady()&&i},Re.prototype.isUsePrebid=function(t,e,i){return t&&!this.initManager.isPrebidReady()?this.logger.info("[AUCTION][".concat(e,"]: Prebid has not finished loading and will be excluded from the auction")):t&&!this.consentManager.isAllowPersonalisation()?this.logger.info("[AUCTION][".concat(e,"]: Prebid has been excluded from the auction because personalisation is disabled")):t&&!i&&this.logger.debug("[AUCTION][".concat(e,"]: Prebid has been excluded from the auction because no headerbidding slots are enabled")),t&&this.initManager.isPrebidReady()&&this.consentManager.isAllowPersonalisation()&&i},Re);function Re(t,e,i,n){this.logger=t,this.settings=e,this.initManager=i,this.consentManager=n,this.auctionCounter=0}var ze,De,Pe=this&&this.__assign||function(){return(Pe=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};(ln=ze=ze||{}).GPT_REQUEST="GPT_REQUEST",ln.GPT_RESPONSE="GPT_RESPONSE",ln.GPT_RENDERED="GPT_RENDERED",ln.GPT_LOADED="GPT_LOADED",ln.CANCELLED="CANCELLED",ln.SUPERSEDED="SUPERSEDED",(pn=De=De||{})[pn.PREBID_REQUEST=0]="PREBID_REQUEST",pn[pn.PREBID_RESPONSE=1]="PREBID_RESPONSE",pn[pn.PREBID_SKIPPED=2]="PREBID_SKIPPED",pn[pn.UAM_REQUEST=3]="UAM_REQUEST",pn[pn.UAM_RESPONSE=4]="UAM_RESPONSE",pn[pn.UAM_SKIPPED=5]="UAM_SKIPPED",pn[pn.GPT_REQUEST=6]="GPT_REQUEST",pn[pn.CANCELLED=7]="CANCELLED";var Oe=(Fe.prototype.createNewAuction=function(t,e,i){this.auctions[t.auctionId]={started:this.reporter.getElapsedTime(),creativeDivIds:t.gptSlots.map(function(t){return t.creativeDivId}),slotNames:t.gptSlots.map(function(t){return t.slotTemplate.slot}),hbDivIds:t.hbSlots.map(function(t){return t.creativeDivId}),uamIncluded:t.useUam,uamResponded:!1,uamSkipped:!1,prebidIncluded:t.usePrebid,prebidResponded:!1,prebidSkipped:!1,uamCancelled:!1,prebidCancelled:!1,gptRequestSent:!1,auctionPhaseCallback:e,slotStatus:t.gptSlots.reduce(function(t,e){return Pe(Pe({},t),((t={})[e.creativeDivId]={slotPhaseCallback:function(t){return i(e,t)}},t))},{})}},Fe.prototype.getAuctionStatus=function(t){return this.auctions[t]},Fe.prototype.getActiveGptCalls=function(){return Object.keys(this.activeGptCalls)},Fe.prototype.getSlotStatus=function(t,e){return this.auctions[t].slotStatus[e]},Fe.prototype.getSlotStatusInferredAuction=function(t,e){var i=this.activeGptCalls[t];if(i)return this.auctions[i].slotStatus[t];this.logger.debug("[AUCTION-STATUS][".concat(e,"]: Could not find active GPT call for ").concat(t))},Fe.prototype.onPrebidRequest=function(t){t=this.auctions[t];t.prebidRequestTime=this.reporter.getElapsedTime(),t.auctionPhaseCallback(De.PREBID_REQUEST)},Fe.prototype.onPrebidResponse=function(t){t=this.auctions[t];t.prebidResponseTime=this.reporter.getElapsedTime(),t.prebidResponded=!0,t.auctionPhaseCallback(De.PREBID_RESPONSE)},Fe.prototype.onPrebidSkipped=function(t){t=this.auctions[t];t.prebidSkipped=!0,t.auctionPhaseCallback(De.PREBID_SKIPPED)},Fe.prototype.onUamRequest=function(t){t=this.auctions[t];t.uamRequestTime=this.reporter.getElapsedTime(),t.auctionPhaseCallback(De.UAM_REQUEST)},Fe.prototype.onUamSkipped=function(t){t=this.auctions[t];t.uamSkipped=!0,t.auctionPhaseCallback(De.UAM_SKIPPED)},Fe.prototype.onUamResponse=function(t){t=this.auctions[t];t.uamResponseTime=this.reporter.getElapsedTime(),t.uamResponded=!0,t.auctionPhaseCallback(De.UAM_RESPONSE)},Fe.prototype.cancelAuction=function(t){t=this.auctions[t];t.cancelled=this.reporter.getElapsedTime(),t.auctionPhaseCallback(De.CANCELLED)},Fe.prototype.removeFromGptActive=function(t){var e=this.activeGptCalls[t];e?(this.logger.debug("[AUCTION][".concat(e,"]: Removed ").concat(t," from GPT active list")),delete this.activeGptCalls[t]):this.logger.debug("[AUCTION]: Could not find ".concat(t," in the GPT active list"))},Fe.prototype.onGptRequest=function(i,t){var n=this;t.forEach(function(t){var e=n.getSlotStatus(i,t);e&&(e.gptRequestTime=n.reporter.getElapsedTime(),e.slotPhaseCallback(ze.GPT_REQUEST),(e=n.activeGptCalls[t])&&(n.logger.warn("[AUCTION][".concat(i,"]: ").concat(t," is part of an uncompleted auction: ").concat(e," and is marked superseded")),n.auctions[e].slotStatus[t].supersededTime=n.reporter.getElapsedTime(),n.auctions[e].slotStatus[t].slotPhaseCallback(ze.SUPERSEDED)),n.activeGptCalls[t]=i)}),this.auctions[i].gptRequestSent=!0,this.auctions[i].auctionPhaseCallback(De.GPT_REQUEST)},Fe.prototype.onGptResponse=function(t){t=this.getSlotStatusInferredAuction(t,ze.GPT_RESPONSE);t&&(t.gptResponseTime=this.reporter.getElapsedTime(),t.slotPhaseCallback(ze.GPT_RESPONSE))},Fe.prototype.onGptSlotRendered=function(t,e){var i=this.getSlotStatusInferredAuction(t,ze.GPT_RENDERED);i&&(i.gptOnRenderTime=this.reporter.getElapsedTime(),e||this.removeFromGptActive(t),i.slotPhaseCallback(ze.GPT_RENDERED))},Fe.prototype.onGptSlotLoaded=function(t){var e=this.getSlotStatusInferredAuction(t,ze.GPT_LOADED);e&&(e.gptOnLoadTime=this.reporter.getElapsedTime(),this.removeFromGptActive(t),e.slotPhaseCallback(ze.GPT_LOADED))},Fe.prototype.cancelSlotAuction=function(t,e,i){this.logger.info("[AUCTION][".concat(t,"]: Cancelled auction for ").concat(e," because ").concat(i));t=this.getSlotStatus(t,e);t&&(t.cancelledTime=this.reporter.getElapsedTime(),this.removeFromGptActive(e),t.slotPhaseCallback(ze.CANCELLED))},Fe);function Fe(t,e){this.logger=t,this.reporter=e,this.auctions={},this.activeGptCalls={}}var Ne=(Le.prototype.sendGptRequest=function(t,e){var i=this,n=this.fuseSlotRegistry.filterUndeleted(t,function(t){i.auctionState.cancelSlotAuction(e,t,"slot DOM element was deleted")});this.auctionState.onGptRequest(e,t),this.fuseSlotRegistry.clearFuseSkins(),bt(n,e)},Le.prototype.handleHBResponse=function(t,e,i){var n,r,s=this.auctionState.getAuctionStatus(t);s.gptRequestSent?e&&this.logger.debug("[AUCTION][".concat(t,"]: Received ").concat(e," bid after adserver request already sent")):(n=s.prebidIncluded,r=s.uamIncluded,i?(this.logger.info("[AUCTION][".concat(t,"]: Timeout reached with missing responses, sending to GPT.\n          Status: ").concat(JSON.stringify(s))),this.sendGptRequest(s.creativeDivIds,t)):r&&n?(s.uamResponded||s.uamCancelled)&&(s.prebidResponded||s.prebidCancelled)?(this.logger.info("[AUCTION][".concat(t,"]: All necessary responses received, sending to GPT")),this.sendGptRequest(s.creativeDivIds,t)):this.logger.debug("[AUCTION][".concat(t,"]: Still waiting for responses. Status: ").concat(JSON.stringify(s))):(this.logger.debug("[AUCTION][".concat(t,"]: ").concat(e," complete, calling GPT")),this.sendGptRequest(s.creativeDivIds,t)))},Le.prototype.setAuctionTimeout=function(t,e){var i=this,t=t+250;this.logger.debug("[AUCTION][".concat(e,"]: Set auction failure timeout of ").concat(t)),setTimeout(function(){return i.handleHBResponse(e,null,!0)},t)},Le.prototype.startPrebidAuction=function(n,t,e){var r=this,s=t.map(function(t){return t.code}),i=JSON.stringify(s);this.reporter.addAdEvent("prebid_request_".concat(i),n),this.logger.info("[AUCTION][".concat(n,"]: Requesting prebid for: ").concat(i)),this.logger.debug("[AUCTION][".concat(n,"]: Prebid request details: ").concat(JSON.stringify(t))),0<t.length?(this.firstPrebidRequest||(this.firstPrebidRequest=!0,this.reporter.setStateStatus("first_prebid_request")),this.prebidGlobal.requestBids({auctionId:n,adUnits:t,timeout:e,bidsBackHandler:function(t,e){r.auctionState.onPrebidResponse(n);var i=Object.keys(t);r.logger.info("[AUCTION][".concat(n,"]: Prebid auction complete. Any-bidder-timedout?=").concat(e,". Responding slots: ").concat(JSON.stringify(i))),0<i.length?r.logger.debug("[AUCTION][".concat(n,"]: Prebid response details: "),JSON.stringify(t)):r.logger.warn("[AUCTION][".concat(n,"]: No bid responses received from prebid")),r.reporter.addAdEvent("prebid_response_".concat(JSON.stringify(i)),n),r.firstPrebidResponse||(r.firstPrebidResponse=!0,r.reporter.setStateStatus("first_prebid_response"));try{r.prebidGlobal.setTargetingForGPTAsync(s),r.handleHBResponse(n,"prebid",!1)}catch(t){r.logger.error("[AUCTION][".concat(n,"]: ").concat(t.message," ").concat(t.stack))}}})):(this.logger.info("[AUCTION][".concat(n,"]: Skipped prebid call because no eligible slots available")),this.auctionState.onPrebidSkipped(n))},Le.prototype.startUamAuction=function(e,t){var i,n=this;t.length?(i=JSON.stringify(t.map(function(t){return t.slotID})),this.reporter.addAdEvent("uam_request_".concat(i),e),this.logger.info("[AUCTION][".concat(e,"]: Sending UAM request for ").concat(i)),this.logger.debug("[AUCTION][".concat(e,"]: Sending UAM request with slot details: ").concat(JSON.stringify(t))),this.firstUamRequest||(this.firstUamRequest=!0,this.reporter.setStateStatus("first_uam_request")),this.uam.makeBids(t,function(t){n.logger.info("[AUCTION][".concat(e,"]: Received UAM response")),n.logger.debug("[AUCTION][".concat(e,"]: UAM response details: "),JSON.stringify(t)),n.reporter.addAdEvent("uam_response_".concat(i),e),n.firstUamResponse||(n.firstUamResponse=!0,n.reporter.setStateStatus("first_uam_response")),n.auctionState.onUamResponse(e),n.handleHBResponse(e,"uam",!1)})):(this.logger.debug("[AUCTION][".concat(e,"]: Skipped UAM bid because no UAM slots found")),this.auctionState.onUamSkipped(e))},Le.prototype.startGptOnlyAuction=function(t,e){this.logger.debug("[AUCTION][".concat(t,"]: Starting GPT-only auction")),this.sendGptRequest(e,t)},Le.prototype.prepareUamRequest=function(t,e){var i=this,n=Bt.getCurrentBreakpoint().name;return e.map(function(t){var e=i.settings.getCurrentSizeMapSizes(t.slotTemplate.id,n);return{slotID:t.creativeDivId,slotName:t.slotTemplate.slot,sizes:e}})},Le.prototype.preparePrebidRequest=function(n,t){var r=this,e=t.map(function(t){return t.creativeDivId}),s=[],o=me.getPrebidUnits(e);return t.forEach(function(t){var e=Bt.getCurrentBreakpoint().name,i=r.settings.getCurrentSizeMapSizes(t.slotTemplate.id,e),e=o[t.creativeDivId];e?(s.push(e),e.mediaTypes||(e.mediaTypes={}),e.mediaTypes.banner||(e.mediaTypes.banner={}),e.mediaTypes.banner.sizes=i):r.logger.debug("[AUCTION][".concat(n,"]: Could not find prebid unit for ").concat(t.creativeDivId))}),s},Le.prototype.executeAuction=function(e,t,i){var n=this,r=e.auctionId,s=e.gptSlots.map(function(t){return t.creativeDivId});this.auctionState.createNewAuction(e,t,i),this.logger.log("[AUCTION][".concat(r,"]: Running with plan: ").concat((i={auctionId:(i=e).auctionId,usePrebid:i.usePrebid,useUam:i.useUam,hbSlots:i.hbSlots.map(function(t){return t.creativeDivId}),gptSlots:i.gptSlots.map(function(t){return t.creativeDivId}),hbTimeout:i.hbTimeout,breakpointName:i.breakpointName},JSON.stringify(i)))),e.usePrebid&&me.pushToPrebidQue(function(){var t=n.preparePrebidRequest(r,e.hbSlots);n.startPrebidAuction(r,t,e.hbTimeout)}),e.useUam&&(o=this.prepareUamRequest(r,e.hbSlots),this.startUamAuction(r,o));var i=e.usePrebid&&!this.auctionState.getAuctionStatus(r).prebidCancelled,o=e.useUam&&!this.auctionState.getAuctionStatus(r).uamCancelled;i||o?this.setAuctionTimeout(e.hbTimeout,r):this.startGptOnlyAuction(r,s)},Le.prototype.reportOnLoadEvent=function(t){t=t.slot.getSlotElementId();this.auctionState.onGptSlotLoaded(t)},Le.prototype.reportSlotResponseReceived=function(t){t=t.slot.getSlotElementId();this.auctionState.onGptResponse(t)},Le.prototype.reportOnRenderEndedEvent=function(t){var e=!t.isEmpty,i=t.slot.getSlotElementId();this.logger.debug("[AUCTION]: ".concat(i," render event details: ").concat(JSON.stringify(t)));var t=this.fuseSlotRegistry.getSlot(i);t?(e?this.logger.info("[AUCTION]: Adserver responded with creative for ".concat(i)):(t={fuseSlotId:t.slotTemplate.id,fuseSlotCode:i,errorType:"MISSING_CREATIVE"},this.reporter.addSlotProblem(t),this.logger.warn("[AUCTION]: Adserver responded without creative for ".concat(i))),this.auctionState.onGptSlotRendered(i,e)):this.fuseSlotRegistry.isDeletedSlot(i)?(this.logger.info("[AUCTION]: Slot Render Ended Event fired for deleted unit ".concat(i)),this.auctionState.onGptSlotRendered(i,e)):this.logger.debug("[AUCTION]: SlotRenderEnded Event fired for non fuse units: ".concat(i,". HasCreative: ").concat(e))},Le.prototype.getStateView=function(){return this.auctionState},Le);function Le(t,e,i,n,r,s){this.fuseSlotRegistry=t,this.prebidGlobal=e,this.uam=i,this.logger=n,this.reporter=r,this.settings=s,this.firstPrebidRequest=!1,this.firstUamRequest=!1,this.firstPrebidResponse=!1,this.firstUamResponse=!1,this.auctionState=new Oe(n,r)}var Ge=(Be.prototype.registerAndQueue=function(t,e,i){t=this.domProcessor.processSlots(t),i=this.fuseSlotRegistry.register(t,i,e,this.runAuctionFn),e=i.filter(function(t){return t.initialisedActive});return this.auctionScheduler.queueSlots(e),i},Be.prototype.registerAndRunAuction=function(t,e,i){i=this.registerAndQueue(t,e,i);return this.runAuction(),i},Be.prototype.registerZoneAndQueue=function(t,e,i,n){e=this.domProcessor.processZoneWithDivId(t,e);if(!e)return null;i=this.fuseSlotRegistry.register([e],n,i,this.runAuctionFn)[0];return null!=i&&i.initialisedActive&&this.auctionScheduler.queueSlots([i]),i},Be.prototype.registerAndQueueLastSlotWithFuseId=function(t,e,i,n){e=this.domProcessor.processLastSlotWithFuseId(t,e);if(e){i=this.fuseSlotRegistry.register([e],n,i,this.runAuctionFn)[0];return i&&i.initialisedActive&&this.auctionScheduler.queueSlots([i]),i}},Be.prototype.registerAndQueueWithFuseId=function(t,e,i,n){e=this.domProcessor.processSlotsWithFuseId(t,e),n=this.fuseSlotRegistry.register(e,n,i,this.runAuctionFn),i=n.filter(function(t){return t.initialisedActive});return this.auctionScheduler.queueSlots(i),n},Be.prototype.runAuction=function(){return this.isTagInitialised()?this.auctionScheduler.runAuction():(this.logger.info("[SCHEDULER] Deferred the auction start until the tag is initialised"),!(this.wasPreInitAuctionDeferred=!0))},Be.prototype.runDeferredAuctionIfRequired=function(){this.wasPreInitAuctionDeferred&&(this.logger.info("[SCHEDULER]: Running deferred auction now that tag is initialised"),this.runAuction())},Be.prototype.forceRunAuction=function(t){var e=this.fuseSlotRegistry.getSlot(t);e?this.auctionScheduler.forceRunAuction(e):this.logger.warn("[API]: Unknown slot ".concat(t))},Be.prototype.runAuctionAllActiveSlots=function(){this.auctionScheduler.queueSlots(this.fuseSlotRegistry.getActiveSlots()),this.runAuction()},Be.prototype.reset=function(){this.logger.log("[API]: resetSlots()"),this.settings.isDomObserverMode()?this.logger.log("[API]: resetSlots() using DomObserver"):(this.fuseSlotRegistry.reset(),this.auctionScheduler.reset()),this.wasPreInitAuctionDeferred=!1},Be.prototype.clearRefreshIntervals=function(){this.auctionScheduler.clearRefreshIntervals()},Be.prototype.getRefreshIntervals=function(){return this.auctionScheduler.getRefreshIntervals()},Be.prototype.configureResponsive=function(){var n=this;Bt.watchForBreakpoints(function(t,e,i){t?n.logger.log("Window resized to ".concat(i," which crossed a breakpoint: New breakpoint is ").concat(e)):n.logger.debug("Window resized to ".concat(i,", but the current breakpoint (").concat(e,") was unchanged"))}),Bt.watchForBreakpoints(function(t,e){t&&(n.logger.log("[SCHEDULER]: Breakpoint changed to ".concat(e,". Cleared pending auctions, refreshes, next-auction requirements. All active slots will re-auction now.")),n.auctionScheduler.clearPendingAuctions(),n.auctionScheduler.clearAuctionBlock(),n.auctionScheduler.clearRefreshIntervals(),e=n.fuseSlotRegistry.getActiveSlots(),n.auctionScheduler.queueSlots(e),n.auctionScheduler.runAuction())})},Be.prototype.loadSlots=function(t,e,i){if(this.logger.log("[API]: loadSlots() called"),!t.initialised)return this.logger.warn("[API]: loadSlots() called during initialisation. Translating call to registerSlots() to avoid reset"),this.registerAndRunAuction(!0,!1,e);i(),this.registerAndQueue(!1,!1,e),this.runAuction()},Be);function Be(t,e,i,n,r,s){var o=this;this.fuseSlotRegistry=t,this.logger=e,this.auctionScheduler=i,this.settings=n,this.domProcessor=r,this.isTagInitialised=s,this.wasPreInitAuctionDeferred=!1,this.runAuctionFn=function(t){o.auctionScheduler.queueSlots(t),o.runAuction()}}var Me=(Ue.prototype.queueSlots=function(t){var e=this,i=this.getCurrentBreakpointName(),n=t.filter(function(t){return e.settings.isSlotEnabledForBreakpoint(t.slotTemplate.id,i)?t.currentlyActive?e.isScheduled(t)?(e.logger.debug("[SCHEDULER]: Skipped ".concat(t.creativeDivId," because it is already scheduled")),!1):!e.isRefreshDisabled(t.creativeDivId)||(e.logger.debug("[SCHEDULER]: Skipped ".concat(t.creativeDivId," because it is disabled")),!1):(e.logger.info("[SCHEDULER]: Skipped ".concat(t.creativeDivId," because it is hasn't activated")),!1):(e.logger.debug("[SCHEDULER]: Skipped ".concat(t.creativeDivId," because no sizes mapped at the current breakpoint (").concat(i,")")),!1)});0<n.length&&(t=n.map(function(t){return t.creativeDivId}),this.logger.info("[SCHEDULER]: Added ".concat(t," to auction queue")),n.forEach(function(t){return e.queuedSlots.push(t)}))},Ue.prototype.isScheduled=function(e){return 0<this.queuedSlots.filter(function(t){return t.creativeDivId===e.creativeDivId}).length},Ue.prototype.isTemplateScheduled=function(e){return 0<this.queuedSlots.filter(function(t){return t.slotTemplate.id===e}).length},Ue.prototype.isRefreshDisabled=function(e){return 0<this.disabledSlots.filter(function(t){return t===e}).length},Ue.prototype.purgeDeletedFromQueue=function(){var e=this;this.queuedSlots=this.queuedSlots.filter(function(t){return!e.isDeletedSlot(t.creativeDivId)||(e.logger.info("[SCHEDULER]: Removed deleted slot ".concat(t.creativeDivId," from queue")),!1)})},Ue.prototype.runAuction=function(){if(this.purgeDeletedFromQueue(),0===this.queuedSlots.length)return this.logger.log("[SCHEDULER]: Auction will not run because no slots are queued"),[];var t=this.getMissingAuctionBlockSlots();if(0<t.length){if(this.auctionBlockTimeoutHandle){var e=this.queuedSlots.map(function(t){return t.creativeDivId});return this.logger.info("[SCHEDULER] Deferred the auction for ".concat(JSON.stringify(e)," because slots missing from the auction block: ").concat(JSON.stringify(t))),this.auctionBlockTriggered=!0,[]}}else this.auctionBlockTimeoutHandle&&(this.logger.info("[SCHEDULER]: Auction block cleared, as requirements satisfied "),this.clearAuctionBlock());this.settings.isRefreshCountFromLoaded()||this.scheduleRefreshTimers();var i=this.planAuction(this.queuedSlots);return this.queuedSlots=this.queuedSlots.filter(function(t){return-1===i.gptSlots.indexOf(t)}),this.logger.log("[SCHEDULER]: Starting auction with ".concat(i.gptSlots.length," slots, ").concat(this.queuedSlots.length," slots remaining")),this.startAuction(i),i.gptSlots.map(function(t){return t.creativeDivId})},Ue.prototype.forceRunAuction=function(t){var e=this.planAuction([t]);this.logger.log("[SCHEDULER][".concat(e.auctionId,"]: Forcing auction for ").concat(t.creativeDivId)),this.startAuction(e)},Ue.prototype.disableSlotRefresh=function(e){this.disabledSlots=this.disabledSlots.filter(function(t){return t!==e}).concat(e)},Ue.prototype.enableSlotRefresh=function(e){this.disabledSlots=this.disabledSlots.filter(function(t){return t!==e})},Ue.prototype.handleOnSlotOutcome=function(t,e,i){i!==ze.GPT_RENDERED||this.triggeredAuctions[t]||(this.triggeredAuctions[t]=!0,0<this.queuedSlots.length&&(this.logger.debug("[SCHEDULER][".concat(t,"]: The first slot has received a render event, initiating the next auction")),this.runAuction())),i===ze.GPT_LOADED&&this.settings.isRefreshCountFromLoaded()&&this.scheduleRefreshTimer(e)},Ue.prototype.startAuction=function(i){var n=this;this.anyAuctionExecuted=!0,this.executeAuction(i,function(){},function(t,e){return n.handleOnSlotOutcome(i.auctionId,t,e)})},Ue.prototype.scheduleRefreshTimers=function(){var e=this;this.queuedSlots.forEach(function(t){e.scheduleRefreshTimer(t)})},Ue.prototype.scheduleRefreshTimer=function(t){this.scheduledRefresh[t.creativeDivId]||(this.scheduledRefresh[t.creativeDivId]=!0,this.setRefreshTimer(t))},Ue.prototype.getRefreshIntervals=function(){return JSON.parse(JSON.stringify(this.refreshTimers))},Ue.prototype.getRefreshingCodes=function(){return Object.keys(this.refreshTimers)},Ue.prototype.clearRefreshIntervals=function(){var e=this;Object.keys(this.refreshTimers).forEach(function(t){e.logger.debug("[REFRESH]: Clearing refresh timer for ".concat(t)),clearInterval(e.refreshTimers[t])}),this.refreshTimers={}},Ue.prototype.reset=function(){this.clearRefreshIntervals(),this.clearAuctionBlock(),this.refreshCounts={},this.scheduledRefresh={},this.queuedSlots=[]},Ue.prototype.clearPendingAuctions=function(){this.queuedSlots=[]},Ue.prototype.setRefreshTimer=function(t){var e=t.slotTemplate.attributes.refresh,i=t.creativeDivId;e?(this.logger.log("[SCHEDULER]: Setting custom refresh time of ".concat(e," seconds for ").concat(i)),this.addRefreshInterval(t,e)):0===e?this.logger.log("[SCHEDULER]: No refresh timer set for ".concat(i)):(e=this.settings.getDefaultRefreshInterval())&&0<e?(this.logger.log("[SCHEDULER]: Setting default refresh time of ".concat(e," seconds for ").concat(i)),this.addRefreshInterval(t,e)):this.logger.debug("[SCHEDULER]: No default refresh timer exists in account settings.")},Ue.prototype.isSkipRefreshInEdgeBrowser=function(t){this.refreshCounts[t.creativeDivId]=this.refreshCounts[t.creativeDivId]||0;var e=this.refreshCounts[t.creativeDivId]>this.settings.getEdgeHtmlMaxAdsRefreshLimit();return(e||!this.browserWindow.document.hasFocus())&&(this.logger.log((e?'will skip refreshing ad(code: "'.concat(t.creativeDivId,'") as it reached Edge browser ads refresh limit of ').concat(this.settings.getEdgeHtmlMaxAdsRefreshLimit()," at the moment - "):"will skip refreshing ad as browser page/tab is NOT active at the moment - ").concat((new Date).toISOString(),".")),!0)},Ue.prototype.refreshCallback=function(t){X.isEdgeBrowser(this.browserWindow)&&this.isSkipRefreshInEdgeBrowser(t)||(this.browserWindow.document.getElementById(t.creativeDivId)?t.element&&t.isInView(this.browserWindow)?(X.isEdgeBrowser(this.browserWindow)&&(this.refreshCounts[t.creativeDivId]+=1),this.queueSlots([t]),this.runAuction()):this.logger.debug("[SCHEDULER]: Not refreshing ".concat(t.creativeDivId," because it is not in view")):this.logger.warn("[AUCTION]: Could not refresh ".concat(t.creativeDivId," because a div with that id was not found in the DOM")))},Ue.prototype.addRefreshInterval=function(t,e){var i=this;this.refreshTimers[t.creativeDivId]&&(this.logger.warn("[SCHEDULER]: Refresh timer already set for ".concat(t.creativeDivId)),clearInterval(this.refreshTimers[t.creativeDivId])),this.refreshTimers[t.creativeDivId]=setInterval(function(){i.refreshCallback(t)},1e3*e)},Ue.prototype.setAuctionBlock=function(t,e){var i=this;this.auctionBlockSlots=t.filter(function(t){var e=i.settings.getSlotTemplate(t);if(!e)return i.logger.warn("[SLOTS][".concat(t,"]: Excluded from next-auction slot requirement, because the slot does not exist")),!1;if(e.conditionConfig)return i.logger.warn("[SLOTS][".concat(t,"]: Excluded from next-auction slot requirement, because the slot has an activation condition")),!1;e=i.getCurrentBreakpointName();return!!i.settings.isSlotEnabledForBreakpoint(t,e)||(i.logger.info("[SLOTS][".concat(t,"]: Excluded from next-auction slot requirement, because it is not enabled at the ").concat(e," breakpoint")),!1)}),0<this.auctionBlockSlots.length?(this.logger.info("[SCHEDULER]: Enabled auction block. Will not proceed until Zones with FuseIds ".concat(JSON.stringify(this.auctionBlockSlots)," are registered, or ").concat(e,"ms have elapsed")),this.auctionBlockTimeoutHandle=setTimeout(function(){i.auctionBlockTriggered?(i.logger.warn("[SCHEDULER]: Auction block timeout reached, missing: ".concat(JSON.stringify(i.getMissingAuctionBlockSlots()),". Running deferred auction")),i.clearAuctionBlock(),i.runAuction()):(0<i.getMissingAuctionBlockSlots().length&&i.logger.warn("[SCHEDULER]: Auction block timeout reached, missing: ".concat(i.getMissingAuctionBlockSlots())),i.clearAuctionBlock())},e)):this.logger.info("[SCHEDULER]: Did not enable AuctionBlock, because no (valid) slots specified")},Ue.prototype.getMissingAuctionBlockSlots=function(){var e=this;return this.auctionBlockSlots.filter(function(t){return!e.isTemplateScheduled(t)})},Ue.prototype.inAnyAuctionExecuted=function(){return this.anyAuctionExecuted},Ue.prototype.clearAuctionBlock=function(){this.auctionBlockSlots=[],this.auctionBlockTriggered=null,clearTimeout(this.auctionBlockTimeoutHandle),this.auctionBlockTimeoutHandle=null},Ue);function Ue(t,e,i,n,r,s,o){this.logger=t,this.browserWindow=e,this.executeAuction=i,this.planAuction=n,this.isDeletedSlot=r,this.getCurrentBreakpointName=s,this.settings=o,this.refreshTimers={},this.refreshCounts={},this.scheduledRefresh={},this.disabledSlots=[],this.queuedSlots=[],this.triggeredAuctions={},this.auctionBlockSlots=[],this.anyAuctionExecuted=!1}var He="CMP_DETERMINED",We="INIT_READY",je=(Ve.prototype.isReadyForInit=function(){var e=this.getInitStatus();return 0===Object.keys(e).filter(function(t){return null===e[t]||void 0===e[t]||!e[t]}).length},Ve.prototype.getInitStatus=function(){return{cmpOk:!this.settings.isCmpRequired()||this.isCmpDetermined(),docReady:this.isDocReady(),anyBidLibraryReady:this.isAnyBidLibraryReady()}},Ve.prototype.checkAndTrigger=function(){_(this.firedCmpDetermined)&&this.isCmpDetermined()&&(this.firedCmpDetermined=this.reporter.getElapsedTime(),this.cmpDeterminedEmitter.emit(He)),_(this.firedInitReady)&&this.isReadyForInit()&&(clearInterval(this.initInterval),this.reporter.setStateStatus("initmanager_fired_auction_ready"),this.firedInitReady=this.reporter.getElapsedTime(),this.initReadyEmitter.emit(We))},Ve.prototype.isDocReady=function(){return!this.settings.isScanDOMOnPageLoad()||this.state.doc_ready},Ve.prototype.setDocReady=function(){this.state.doc_ready=!0,this.checkAndTrigger()},Ve.prototype.isCmpDetermined=function(){return!_(this.state.cmp.load_wait_finish_millis)},Ve.prototype.isCmpTimeout=function(){var t=this.state.cmp.load_wait_start_millis;return!!t&&this.reporter.getElapsedTime()-t>this.settings.getGdprTimeoutMillis()},Ve.prototype.cmpLoadWaitStart=function(){this.state.cmp.load_wait_start_millis=this.reporter.getElapsedTime(),this.checkAndTrigger()},Ve.prototype.setCmpDetermined=function(){this.logger.debug("[INITMANAGER]: setPersonalisationDetermined()"),this.state.cmp.load_wait_finish_millis=this.reporter.getElapsedTime(),this.checkAndTrigger()},Ve.prototype.setPrebidLoadStart=function(){this.state.prebid_load_start=this.reporter.getElapsedTime(),this.checkAndTrigger()},Ve.prototype.isPrebidLoadStarted=function(){return null!==this.state.prebid_load_start},Ve.prototype.setPrebidReady=function(){this.state.prebid_ready=!0,this.checkAndTrigger()},Ve.prototype.isPrebidReady=function(){return this.state.prebid_ready},Ve.prototype.setPrebidAutoScanRegistrationsComplete=function(){this.state.prebid_autoscan_registrations_complete=this.reporter.getElapsedTime(),this.checkAndTrigger()},Ve.prototype.isPrebidAutoScanRegistrationsComplete=function(){return this.state.prebid_autoscan_registrations_complete},Ve.prototype.isGptReady=function(){return this.state.gpt_ready},Ve.prototype.setGptReady=function(){this.state.gpt_ready=!0,this.checkAndTrigger()},Ve.prototype.setGptAutoScanRegistrationsComplete=function(){this.state.gpt_autoscan_registrations_complete=this.reporter.getElapsedTime(),this.checkAndTrigger()},Ve.prototype.isGptAutoScanRegistrationsComplete=function(){return this.state.gpt_autoscan_registrations_complete},Ve.prototype.isUamReady=function(){return this.state.uam_ready},Ve.prototype.setUamReady=function(){this.state.uam_ready=!0,this.checkAndTrigger()},Ve.prototype.setUamLoadStart=function(){this.state.uam_load_start=this.reporter.getElapsedTime(),this.checkAndTrigger()},Ve.prototype.isUamLoadStarted=function(){return null!==this.state.uam_load_start},Ve.prototype.isAnyBidLibraryReady=function(){return null!==this.isPrebidAutoScanRegistrationsComplete()||null!==this.isGptAutoScanRegistrationsComplete()||this.isUamReady()},Ve.prototype.setTagInitialised=function(){this.state.tag_initialised=!0},Ve.prototype.isTagInitialised=function(){return this.state.tag_initialised},Ve.prototype.addInitReadyListener=function(t){this.initReadyEmitter.isTriggered(We)?(this.logger.debug("[EVENT][".concat(We,"]: Already triggered, invoking callback synchronously")),t()):this.initReadyEmitter.once(We,t)},Ve.prototype.addCmpDeterminedListener=function(t){this.cmpDeterminedEmitter.isTriggered(He)?(this.logger.debug("[EVENT][".concat(He,"]: Already triggered, invoking callback synchronously")),t()):this.cmpDeterminedEmitter.once(He,t)},Ve);function Ve(t,e,i){var n=this;this.logger=t,this.reporter=e,this.settings=i,this.state={cmp:{last_report:null,load_wait_start_millis:null,load_wait_finish_millis:null},prebid_load_start:null,uam_load_start:null,prebid_ready:!1,gpt_ready:!1,uam_ready:!1,doc_ready:!1,gpt_autoscan_registrations_complete:null,prebid_autoscan_registrations_complete:null,tag_initialised:!1},this.firedInitReady=null,this.firedCmpDetermined=null,this.initInterval=setInterval(function(){return n.checkAndTrigger()},100),this.cmpDeterminedEmitter=new ye([He],this.logger),this.initReadyEmitter=new ye([We],this.logger)}function qe(){}var Ke=new(qe.prototype.getInitManager=function(){return this.initManager||(this.initManager=new je(I.getLogger(),I.getReporter(),J)),this.initManager},qe),Qe=(Je.prototype.code=function(t){return"1---"},Je);function Je(){}var Ye=(Ze.prototype.loadAmazonUam=function(i,n,t,e,r,s){var o;function a(t,e){n[i]._Q.push([t,e])}n[i]||(n[i]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(o=t.createElement(e)).async=!0,o.src=r,"function"==typeof s&&(o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,s())}:o.onload=function(){s()}),(e=t.getElementsByTagName(e)[0]).parentNode.insertBefore(o,e))},Ze.prototype.load=function(t){var e=this;if(this.logger.debug("[UAM]: Loading script"),this.reporter.setStateStatus("uam_script_load_start"),this.initManager.setUamLoadStart(),this.loadAmazonUam("apstag",this.browserWindow,this.browserWindow.document,"script","//c.amazon-adsystem.com/aax2/apstag.js",function(){e.reporter.setStateStatus("uam_script_load_finish"),e.init(t)}),!this.browserWindow.apstag)return this.logger.error("[INIT]: UAM script load failed.")},Ze.prototype.init=function(t){var e=this;this.reporter.setStateStatus("uam_initialise_start"),this.browserWindow.apstag.init(this.getUamConfig(t),function(){e.logger.info("[UAM]: Initialisation finished"),e.reporter.setStateStatus("uam_initialise_finish"),e.initManager.setUamReady()})},Ze.prototype.getUamConfig=function(t){var e={pubID:this.pubId,adServer:this.adServer,schain:{}};return t||(e.gdpr={cmpTimeout:0}),!_(this.sco)&&Object.getOwnPropertyNames(this.sco).length&&(e.schain={ver:"1.0",complete:1,nodes:[{asi:this.sco.asi,sid:this.sco.sellerId,hp:1}]}),e},Ze.prototype.makeBids=function(t,e){var i=this;this.browserWindow.apstag.fetchBids({slots:t},function(t){i.gptPushFn(function(){i.browserWindow.apstag.setDisplayBids(),e(t)})})},Ze);function Ze(t,e,i,n,r,s,o,a,l){this.pubId=t,this.adServer=e,this.logger=i,this.browserWindow=n,this.consentManager=r,this.reporter=s,this.initManager=o,this.gptPushFn=a,this.sco=l}var Xe=($e.prototype.load=function(){this.reporter.setStateStatus("cmp_load_quantcast_start");var t=new XMLHttpRequest,e=this.browserWindow.document.location.hostname,i=this.browserWindow.document.createElement("script"),n=this.browserWindow.document.getElementsByTagName("script")[0],r=this.browserWindow.document.getElementsByTagName("head")[0]||this.browserWindow.document.documentElement,s="https://quantcast.mgr.consensu.org".concat("/choice/","PRrmquD1Ggcb1","/",e,"/choice.js");t.onreadystatechange=function(){var t;4===this.readyState&&(i.async=!0,i.type="text/javascript",200===this.status?i.src=s:(t="https://quantcast.mgr.consensu.org".concat("/choice.js"),i.src=t,s=t),n&&n.parentNode?n.parentNode.insertBefore(i,n):(console.debug("First script element not fully initialised, falling back to head-based insertion"),r.insertBefore(i,r.firstChild)))},t.open("GET",s,!0),t.send()},$e);function $e(t,e){this.browserWindow=t,this.reporter=e}var ti=(ei.prototype.generate=function(){this.createStubFunctionV2()},ei.prototype.createStubFunctionV2=function(){var o=this;!function(){o.logger.debug("[CMP]: Generating V2 stub");for(var t,r="__tcfapiLocator",i=[],s=o.browserWindow,e=function t(){var e,i=s.document,n=!!s.frames[r];return n?o.logger.debug("[CMP] Found existing version 2 stub"):(o.logger.debug("[CMP] Version 2 stub not found - generating"),i.body?((e=i.createElement("iframe")).style.cssText="display:none",e.name=r,i.body.appendChild(e)):setTimeout(t,25)),!n},n=s;n;){try{if(n.frames[r]){t=n,o.logger.debug("[CMP] Found locator frame");break}}catch(t){"{}"!==JSON.stringify(t)&&o.logger.log("[CMP]:",JSON.stringify(t))}if(n===o.browserWindow.top)break;n=n.parent}t||(o.logger.debug("[CMP] Locator frame not found"),e(),s.__tcfapi=function(){var t,e=arguments;if(!e.length)return i;"setGdprApplies"===e[0]?3<e.length&&2===e[2]&&"boolean"==typeof e[3]&&(t=e[3],"function"==typeof e[2]&&e[2]("set",!0)):"ping"===e[0]?"function"==typeof e[2]&&e[2]({gdprApplies:t,cmpLoaded:!1,cmpStatus:"stub"}):i.push(e)},s.addEventListener("message",function(i){var n="string"==typeof i.data,t={};try{t=n?JSON.parse(i.data):i.data}catch(t){"{}"!==JSON.stringify(t)&&o.logger.error("[CMP]:",JSON.stringify(t))}var r=t.__tcfapiCall;r&&o.browserWindow.__tcfapi(r.command,r.version,function(t,e){e={__tcfapiReturn:{returnValue:t,success:e,callId:r.callId}};n?i.source.postMessage(JSON.stringify(e),"*"):i.source.postMessage(e,"*")},r.parameter)},!1))}()},ei);function ei(t,e){this.logger=t,this.browserWindow=e}var ii=(ni.prototype.checkForCCPA=function(i){var n=this;this.browserWindow.__uspapi("uspPing",1,function(t,e){e&&t.mode.includes("USP")&&t.jurisdiction.includes(t.location.toUpperCase())?(n.logger.log("[CMP-V2]: CCPA Region"),n.browserWindow.__uspapi("setUspDftData",1,function(t,e){n.logger.log("[CMP-V2]: Setting up data for USP API",JSON.stringify(t),e),n.browserWindow.__uspapi("getUSPData",1,function(t,e){return e?void i({applies:!0,privacyString:t.uspString}):(n.logger.log("[CMP-V2]: Failed retrieving USP data use default instead"),i({applies:!0,privacyString:"1---"}))})})):i({applies:!1})})},ni.prototype.setGDPRConsentPrompt=function(){var t=this;this.consentUIPrompt.setup("Privacy Settings",function(){t.browserWindow.__tcfapi("displayConsentUi",2,function(){return t.logger.log("[CMP-V2]: GDPR Consent UI displayed")})})},ni.prototype.setCCPAConsentPrompt=function(){var t=this;this.consentUIPrompt.setup("Do Not Sell My Data",function(){t.browserWindow.__uspapi("displayUspUi")})},ni.prototype.cmpLoaded=function(e){var i=!1;setTimeout(function(){if(!i)return e(!1)},1e3),this.browserWindow.__tcfapi("ping",2,function(t){return i=!0,t&&t.cmpLoaded?e(!0):e(!1)})},ni.prototype.getConsentData=function(i){var n=this;this.browserWindow.__tcfapi("getTCData",2,function(t,e){return n.callCount++,e&&t?_(t.gdprApplies)||"loading"===(null==t?void 0:t.cmpStatus.toLowerCase())?i({dataAvailable:!0,gdprApplies:void 0,cmpStatus:null==t?void 0:t.cmpStatus,eventStatus:null==t?void 0:t.eventStatus}):!1===t.gdprApplies?i({dataAvailable:!0,gdprApplies:!1,cmpStatus:null==t?void 0:t.cmpStatus,eventStatus:null==t?void 0:t.eventStatus}):!0===t.gdprApplies?n.handleGdprApplies(t,i):void n.logger.warn("[CMP-V2]: Unexpected gdprApplies status. Data: ".concat(JSON.stringify(t))):i({dataAvailable:!1,cmpStatus:null==t?void 0:t.cmpStatus,eventStatus:null==t?void 0:t.eventStatus})})},ni.prototype.handleGdprApplies=function(t,e){var i=t.eventStatus.toLowerCase();if("useractioncomplete"!==i&&"tcloaded"!==i)return"cmpuishown"===i||this.callCount%8==0&&this.logger.warn("[CMP-V2]: Unexpected eventStatus. Data: ".concat(JSON.stringify(t))),e({dataAvailable:!0,gdprChoiceReceived:!1,gdprApplies:!0,cmpStatus:null==t?void 0:t.cmpStatus,eventStatus:null==t?void 0:t.eventStatus});var n=(null===(i=null===(n=t.purpose)||void 0===n?void 0:n.consents)||void 0===i?void 0:i[2])||(null===(r=t.purposeConsents)||void 0===r?void 0:r[2]),i=(null===(r=null===(i=t.purpose)||void 0===i?void 0:i.consents)||void 0===r?void 0:r[3])||(null===(s=t.purposeConsents)||void 0===s?void 0:s[3]),r=!_(n),s=!_(i),s=r&&s,i=s&&n&&i;return this.logger.debug("[CMP-V2]: Purposes available: ".concat(s,", Consent: ").concat(i," Data: ").concat(JSON.stringify(t))),e({dataAvailable:!0,gdprChoiceReceived:!0,personalisedAdsConsent:i,gdprApplies:!0,cmpStatus:null==t?void 0:t.cmpStatus,eventStatus:null==t?void 0:t.eventStatus})},ni.prototype.createUspStub=function(){function e(){var t=arguments;x(r.__uspapi)!==e?setTimeout(function(){void 0!==r.__uspapi&&r.__uspapi.apply(r.__uspapi,t)},400):(n.warn("[CMP-V2] USP is still in stub mode. Calling to ".concat(t[0]," API will be unsuccessful")),"function"==typeof t[2]&&t[2](void 0,!1))}var t,i=this,n=this.logger,r=this.browserWindow;void 0===r.__uspapi&&(r.__uspapi=e,t=setInterval(function(){i.uspTries++,r.__uspapi===e&&i.uspTries<i.uspTriesLimit?n.warn("[CMP-V2]: USP is not accessible"):clearInterval(t)},300))},ni);function ni(t,e,i){this.logger=t,this.consentUIPrompt=i,this.uspTries=0,this.uspTriesLimit=3,this.callCount=-1,this.browserWindow=e,this.createUspStub()}var ri=(si.prototype.isAllowPersonalisation=function(){return!J.isCmpRequired()||(null!==this.allowPersonalisation?this.allowPersonalisation:!J.isStrictCmp())},si.prototype.generateStubs=function(){this.stubFunctionsGenerator.generate()},si.prototype.loadVersion=function(){this.initManager.cmpLoadWaitStart(),this.reporter.setStateStatus("cmp_load_wait_start"),this.logger.info("[CMP]: Wait for CMP to load"),this.checkForVersion2()},si.prototype.versionLoader=function(t){var e=this,i=t.found,t=t.versionNumber;null===this.version&&(i?2===t?(this.reporter.setStateStatus("cmp_load_wait_finish"),this.logger.debug("[CMP]: Loaded version ".concat(t)),this.version=new ii(this.logger,this.browserWindow,this.consentUIPrompt),this.handleCmpLoaded()):(this.logger.warn("[CMP]: Version ".concat(t," is not supported, disabling personalisation")),this.allowPersonalisation=!1,this.initManager.setCmpDetermined()):(++this.cmpLoadCounter%10==0&&this.logger.debug("[CMP] Waiting for load"),setTimeout(function(){return e.checkForVersion2()},50)))},si.prototype.checkForVersion2=function(){var e=this;this.browserWindow.__tcfapi("ping",null,function(t){e.versionLoader({found:t.cmpLoaded,versionNumber:2})})},si.prototype.checkForCCPA=function(t){this.version.checkForCCPA(t)},si.prototype.isCmpLoaded=function(){return null!==this.version},si.prototype.cmpLoaded=function(t){if(this.logger.log("[CMP]: Check if loaded"),null===this.version)return t(!1);this.version.cmpLoaded(t)},si.prototype.getConsentData=function(t){this.version.getConsentData(t)},si.prototype.setGDPRConsentPrompt=function(){this.version.setGDPRConsentPrompt()},si.prototype.setCCPAConsentPrompt=function(){this.version.setCCPAConsentPrompt()},si.prototype.setNonPrivacyRegionsPrompt=function(){this.consentUIPrompt.setup("You are outside the CCPA jurisdiction.")},si.prototype.handleGdprNotApplies=function(){var i=this;this.logger.info("[CMP]: GDPR does not apply");var n,r=!1;setTimeout(function(){r||(i.reporter.setStateStatus("cmp_check_for_ccpa_timeout"),i.logger.warn("[CMP]: USP API is not responding, continue as if not in CCPA region"),r=!0,i.allowPersonalisation=!0,i.initManager.setCmpDetermined())},1),this.reporter.setStateStatus("cmp_check_for_ccpa_start"),this.checkForCCPA(function(t){var e=t.applies,t=t.privacyString;i.reporter.setStateStatus("cmp_check_for_ccpa_finish"),e?(i.setCCPAConsentPrompt(),n="Y"===t[2].toUpperCase(),i.logger.info("[CMP]: CCPA applies. disablePersonalisation: ".concat(n)),i.cmpRegion=2,i.allowPersonalisation=!n):(i.logger.info("[CMP]: Not in CCPA region, continue with personalisation"),i.setNonPrivacyRegionsPrompt(),i.cmpRegion=0,i.allowPersonalisation=!0),r||(r=!0,i.initManager.setCmpDetermined())})},si.prototype.handleGdprApplies=function(){var r=this;this.logger.log("[CMP]: GDPR applies, checking if personalisation is allowed"),this.cmpRegion=1,this.reporter.setStateStatus("cmp_gdpr_choice_wait_start");var s,o,a=!1;this.getConsentData(function(t){var e=t.gdprChoiceReceived,t=t.personalisedAdsConsent;e&&(a=!0,r.reporter.setStateStatus("cmp_gdpr_choice_wait_finish"),r.logger.info("[CMP]: GDPR decision received via short-circuit. Allow personalisation: ".concat(t)),r.allowPersonalisation=t,r.initManager.setCmpDetermined())}),a||(s=0,this.setGDPRConsentPrompt(),o=setInterval(function(){r.getConsentData(function(t){var e=t.gdprChoiceReceived,i=t.personalisedAdsConsent,n=t.cmpStatus,t=t.eventStatus;e?(a=!0,r.reporter.setStateStatus("cmp_gdpr_choice_wait_finish"),r.logger.info("[CMP]: GDPR decision received. Allow personalisation: ".concat(i)),clearInterval(o),r.allowPersonalisation=i,r.initManager.setCmpDetermined()):++s%10==0&&r.logger.info("[CMP]: Waiting for GDPR personalisation choice. cmpStatus: ".concat(n,", eventStatus: ").concat(t))})},100))},si.prototype.handleCmpLoaded=function(){var r=this;this.logger.info("[CMP]: Checking if the GDPR applies"),this.reporter.setStateStatus("cmp_gdpr_applies_check_start");function s(t){r.reporter.setStateStatus("cmp_gdpr_applies_check_finish"),!1===t?r.handleGdprNotApplies():J.isRequestGdprPersonalisation()?r.handleGdprApplies():(r.reporter.setStateStatus("cmp_gdpr_choice_wait_finish"),r.logger.info("[CMP]: The GDPR applies, but we will assume they do not allow personalisation"),r.cmpRegion=1,r.allowPersonalisation=!1,r.initManager.setCmpDetermined())}this.getConsentData(function(t){var e,i,n,t=t.gdprApplies;_(t)?(e=0,r.logger.debug("[CMP]: Setting a check interval of ".concat(250,"ms")),i=!1,n=setInterval(function(){r.getConsentData(function(t){t=t.gdprApplies;_(t)?e++%4==0&&r.logger.info("[CMP]: Waiting for GDPR determination"):(clearInterval(n),i||(i=!0,s(t)))})},250)):(r.logger.debug("[CMP]: GDPR status already available, processing immediately"),s(t))})},si);function si(t,e,i,n,r,s){this.logger=e,this.reporter=i,this.stubFunctionsGenerator=n,this.consentUIPrompt=r,this.initManager=s,this.version=null,this.allowPersonalisation=null,this.cmpLoadCounter=0,this.cmpRegion=null,this.browserWindow=t}var oi=(ai.prototype.setup=function(t,e){var i,n=this.browserWindow.document.querySelector(this.domSelector);n&&(e?((i=document.createElement("a")).href="javascript:void(0)",i.id=this.elementId,i.innerHTML=t,i.addEventListener("click",e),n.appendChild(i)):n.textContent=t)},ai);function ai(t,e,i){void 0===e&&(e="div[data-fuse-privacy-tool]"),void 0===i&&(i="fuse-privacy-tool"),this.browserWindow=t,this.domSelector=e,this.elementId=i}function li(){}var ci=new(li.prototype.getStubFunctionsGenerator=function(){return this.stubFunctionsGenerator||(this.stubFunctionsGenerator=new ti(I.getLogger(),c.getBrowserWindowObject())),this.stubFunctionsGenerator},li.prototype.getConsentManger=function(){return this.consentManager||(this.consentManager=new ri(c.getBrowserWindowObject(),I.getLogger(),I.getReporter(),this.getStubFunctionsGenerator(),new oi(c.getBrowserWindowObject()),Ke.getInitManager())),this.consentManager},li.prototype.getQuantcastLoader=function(){return this.quantcastLoader||(this.quantcastLoader=new Xe(c.getBrowserWindowObject(),I.getReporter())),this.quantcastLoader},li);function di(){}var ui=new(di.prototype.getCcpaPrivacyStringCoder=function(){return new Qe},di.prototype.getUamAdServer=function(){return"googletag"},di.prototype.getSco=function(){return J.getSco()},di.prototype.getUam=function(){return this.uam||(this.uam=new Ye(J.getUamSettings().pubID,ui.getUamAdServer(),I.getLogger(),c.getBrowserWindowObject(),ci.getConsentManger(),I.getReporter(),Ke.getInitManager(),pt,ui.getSco())),this.uam},di),pi="AlwaysTrue",gi="AlwaysFalse",hi=(bi.prototype.check=function(t,e){return!0},bi);function bi(){}var fi=(mi.prototype.check=function(t,e){return!1},mi);function mi(){}var yi=(Si.prototype.check=function(t,e){return this.conditions.reduce(function(t,e){return t&&e.checkCondition()},!0)},Si);function Si(t){this.conditions=t}var Ii=(vi.prototype.check=function(t,e){return this.conditions.reduce(function(t,e){return t||e.checkCondition()},!1)},vi);function vi(t){this.conditions=t}var Ai=(xi.prototype.checkCondition=function(){return this.checkConditionAndNotify(!1)},xi.prototype.checkConditionAndNotify=function(t){if(!this.satisfied){try{this.satisfied=this.condition.check(this.context,this.api)}catch(t){return this.logger.warn("[CONDITION][".concat(this.context,"]: Caught exception while checking condition"),t.stack),!1}this.satisfied&&t&&this.activatorCallback()}return this.satisfied},xi.prototype.destroyTriggers=function(){var i=this;this.condition instanceof yi||this.condition instanceof Ii?this.condition.conditions.forEach(function(t){return t.destroyTriggers()}):this.triggers.forEach(function(e){try{e.destroy()}catch(t){i.logger.warn("[CONDITION][".concat(i.context,"][").concat(e,"]: Caught exception while destroying trigger: "),t.stack)}})},xi.prototype.enableTriggers=function(t){var i=this;this.condition instanceof yi||this.condition instanceof Ii?this.condition.conditions.forEach(function(t){return t.enableTriggers(i.api)}):this.triggers.forEach(function(e){try{e.enable(t,function(){return i.checkConditionAndNotify(!0)})}catch(t){i.logger.warn("[CONDITION][".concat(i.context,"][").concat(e,"]: Caught exception while enabling trigger: "),t.stack)}})},xi);function xi(t,e,i,n,r,s){this.context=t,this.condition=e,this.triggers=i,this.api=n,this.activatorCallback=r,this.logger=s,this.satisfied=!1}var _i=(Ti.prototype.enableTriggers=function(){this.rootCondition.enableTriggers(this.api)},Ti.prototype.destroy=function(){this.rootCondition.destroyTriggers()},Ti.prototype.checkCondition=function(){return this.rootCondition.checkCondition()},Ti.prototype.checkAndFire=function(){this.firedCallback||this.rootCondition.checkCondition()&&(this.logger.info("[ACTIVATOR][".concat(this.context,"]: Conditions are satisfied. Destroying triggers and invoking callback")),this.rootCondition.destroyTriggers(),this.firedCallback=!0,this.onSatisfiedCB(this.context))},Ti);function Ti(t,e,i,n,r){this.logger=t,this.context=e,this.rootCondition=i,this.api=n,this.onSatisfiedCB=r,this.firedCallback=!1}var Ci=(wi.prototype.buildActivator=function(t,e,i,n){var t=this.buildCondition(e,t,i,function(){return r.checkAndFire()}),r=new _i(this.logger,e,t,i,n);return r},wi.prototype.registerCondition=function(t,e){if(this.conditions[t])throw Error("Condition with ".concat(t," already registered"));this.conditions[t]=e},wi.prototype.registerTrigger=function(t,e){if(this.triggers[t])throw Error("Trigger with ".concat(t," already registered"));this.triggers[t]=e},wi.prototype.buildCondition=function(t,e,i,n){var r=e.type;switch(r){case"and":return this.buildBooleanCondition(t,e,i,n,function(t){return new yi(t)});case"or":return this.buildBooleanCondition(t,e,i,n,function(t){return new Ii(t)});case"trigger":return this.buildTriggerCondition(t,e,i,n);default:!function(t){throw new Error("exhaustiveCheck(".concat(t,") should not have been called"))}(r)}},wi.prototype.buildTriggerCondition=function(t,e,i,n){var r=this,s=this.conditions[e.conditionName];if(!s)return this.logger.error("[CONDITION-FACTORY]: Could not find condition ".concat(e.conditionName,", it will be deemed false")),this.buildAlwaysFalseCondition(t,i,n);s=s(e.conditionParams),e=e.triggers.map(function(t){var e=r.triggers[t.triggerName];return e?e(t.triggerParams):(r.logger.error("[CONDITION-FACTORY]: Could not find trigger with name ".concat(t.triggerName)),null)}).filter(function(t){return null!=t});return new Ai(t,s,e,i,n,this.logger)},wi.prototype.buildAlwaysFalseCondition=function(t,e,i){return new Ai(t,new fi,[],e,i,this.logger)},wi.prototype.buildBooleanCondition=function(e,t,i,n,r){var s=this,t=t.subConditions;if(!t||0===t.length)return this.logger.error("[CONDITION-FACTORY]: Boolean condition with no sub-conditions"),this.buildAlwaysFalseCondition(e,i,n);t=r(t.map(function(t){return s.buildCondition(e,t,i,n)}));return new Ai(e,t,[],i,n,this.logger)},wi);function wi(t){this.logger=t,this.conditions={},this.triggers={}}var Ei="IntervalTrigger",ki=(Ri.prototype.enable=function(t,e){this.intervalId=setInterval(function(){return e(t)},this.intervalMs)},Ri.prototype.destroy=function(){clearInterval(this.intervalId)},Ri);function Ri(t){if(this.config=t,this.intervalMs=t.intervalMs,!this.intervalMs)throw Error("intervalMs not defined for IntervalTrigger")}var zi="DocumentStatus",Di=(Pi.prototype.check=function(t,e){return-1!==this.state.indexOf(document.readyState)},Pi);function Pi(t){this.config=t,this.state=t.state}var Oi="UrlRegex",Fi=(Ni.prototype.check=function(t,e){var i;return 0<(null===(i=window.location.toString().match(this.regex))||void 0===i?void 0:i.length)},Ni);function Ni(t){this.config=t,this.regex=t.regex}var Li="DomElementExists",Gi=(Bi.prototype.check=function(t,e){return null!==document.querySelector(this.selector)},Bi);function Bi(t){this.config=t,this.selector=t.selector}var Mi="AbsoluteScrollDistance",Ui=(Hi.prototype.check=function(t,e){return window.scrollY>=this.pixelsDistance},Hi);function Hi(t){this.config=t,this.pixelsDistance=Number(t.pixelsDistance)||0}var Wi="DocumentStatusTrigger",ji=(Vi.prototype.destroy=function(){this.window.removeEventListener("readystatechange",this.triggeredCB)},Vi.prototype.enable=function(t,e){this.window=t.getWindow(),this.triggeredCB=e,document.addEventListener("readystatechange",this.triggeredCB)},Vi);function Vi(){}var qi="WindowHeightDistance",Ki=(Qi.prototype.check=function(t,e){return window.scrollY>=window.innerHeight*this.windowHeightDistance},Qi);function Qi(t){this.config=t,this.windowHeightDistance=Number(t.windowHeightDistance)||0}function Ji(t){this.logger=t}function Yi(t){t.registerCondition(pi,function(t){return new hi}),t.registerCondition(gi,function(t){return new fi})}function Zi(t){t.registerTrigger(O,function(t){return new F}),t.registerTrigger(Ei,function(t){return new ki(t)}),t.registerTrigger(Wi,function(t){return new ji})}var Xi=new(Ji.prototype.getSlotConditionFactory=function(){return this.slotConditionFactory||(this.slotConditionFactory=new Ci(this.logger),Yi(this.slotConditionFactory),this.slotConditionFactory.registerCondition(M,function(t){return new U}),Zi(this.slotConditionFactory)),this.slotConditionFactory},Ji.prototype.getInsertConditionFactory=function(){var t;return this.insertConditionFactory||(this.insertConditionFactory=new Ci(this.logger),Yi(this.insertConditionFactory),(t=this.insertConditionFactory).registerCondition(zi,function(t){return new Di(t)}),t.registerCondition(Mi,function(t){return new Ui(t)}),t.registerCondition(qi,function(t){return new Ki(t)}),t.registerCondition(Oi,function(t){return new Fi(t)}),t.registerCondition(Li,function(t){return new Gi(t)}),Zi(this.insertConditionFactory)),this.insertConditionFactory},Ji)(I.getLogger()),$i="data-fuse",tn="".concat("div","[").concat($i,"]"),en=(nn.prototype.updateSlotElement=function(t,e,i){var n;return this.logger.debug("[SLOTS][".concat(t,": Preparing the element")),e.setAttribute("data-fuse-code","".concat(t)),e.setAttribute("data-fuse-slot","".concat(t)),this.document.getElementById(t)?this.logger.warn("[DOM-SCAN]: Found existing slot element with id ".concat(t)):((n=this.document.createElement("div")).setAttribute("id","".concat(t)),n.className="fuse-slot",this.fuseSlotFormatter.format(e,i),e.appendChild(n)),e},nn.prototype.assignSlotCounter=function(t){return this.slotCounter[t]||(this.slotCounter[t]=0),++this.slotCounter[t]},nn.prototype.assignSlotElementId=function(t){return"".concat("fuse-slot-").concat(t,"-").concat(this.assignSlotCounter(t))},nn.prototype.processRawElement=function(t,e){var i=t.getAttribute($i),n=t.getAttribute("data-fuse-code"),r=this.templateSettings.getSlotTemplate(i);if(!r)return this.logger.warn("[SLOTS]: Unknown FuseId ".concat(i)),null;if(n&&e)return this.logger.debug("[SLOTS]: Skip ".concat(n," because it was already processed")),null;n&&this.logger.warn("[SLOTS]: Processing ".concat(n," again. This is likely to be an error, but preserved for backwards compatibility"));i=this.assignSlotElementId(i);return this.updateSlotElement(i,t,r),{slotTemplate:r,elementId:i,element:t,targeting:nn.extractTargeting(t)}},nn.getTargetingValue=function(t){return 0<t.indexOf(",")?t.split(",").map(function(t){return t.trim()}).filter(function(t){return""!==t}):t},nn.extractTargeting=function(e){var t=e.getAttributeNames().filter(function(t){return"data-targeting-key"!==t&&"data-targeting-value"!==t}).filter(function(t){return 0===t.indexOf("data-targeting-",0)}).map(function(t){return{attributeKey:t,targetingKey:t.replace("data-targeting-","").trim()}}).map(function(t){return{key:t.targetingKey,value:e.getAttribute(t.attributeKey)}}).filter(function(t){var e=t.key,t=t.value;return e&&e.length&&t&&t.length}).map(function(t){var e=t.key,t=t.value;return{key:e,value:nn.getTargetingValue(t)}}),i=e.getAttribute("data-targeting-key"),n=e.getAttribute("data-targeting-value");return i&&i.length&&n&&n.length&&!t.some(function(t){return t.key===i})&&t.push({key:i,value:nn.getTargetingValue(n)}),t},nn.prototype.findElementWithDomId=function(t){var e=this.document.querySelectorAll("".concat("div",'[id="').concat(t,'"][').concat($i,"]"));return 0==e.length?this.logger.warn("[SLOTS]: No DOM element found with both id='".concat(t,"' AND a data-fuse attribute")):1<e.length&&this.logger.warn("[SLOTS]: Multiple DOM elements found with id '".concat(t,"'")),e},nn.prototype.findAllFuseElements=function(){return this.document.querySelectorAll(tn)},nn.prototype.findElementsWithTemplateId=function(t){return this.document.querySelectorAll("".concat("div","[").concat($i,'="').concat(t,'"]'))},nn.prototype.processRawElements=function(t,e){var i=this,n=[];return t.forEach(function(t){t=i.processRawElement(t,e);t&&n.push(t)}),n},nn.prototype.processSlots=function(t){var e=this.findAllFuseElements();return this.processRawElements(e,t)},nn.prototype.processZoneWithDivId=function(t,e){t=this.findElementWithDomId(t),e=this.processRawElements(t,e);return e[e.length-1]},nn.prototype.processLastSlotWithFuseId=function(t,e){t=this.findElementsWithTemplateId(t),e=this.processRawElements(t,e);return e[e.length-1]},nn.prototype.processSlotsWithFuseId=function(t,e){t=this.findElementsWithTemplateId(t);return this.processRawElements(t,e)},nn);function nn(t,e,i,n){this.logger=t,this.document=e,this.templateSettings=i,this.fuseSlotFormatter=n,this.slotCounter={}}var rn=(sn.prototype.format=function(t,e){var i=e.attributes;!this.templateSettings.isMiniScrollersEnabled()||!1===i.miniscroller||i.sticky||i.interscroller||("0px"===(i=this.browserWindow.getComputedStyle(t)).getPropertyValue("min-height")&&"0px"===i.getPropertyValue("height")?(this.logger.log("[DOM-SCAN][".concat(e.id,']: Update slot element "').concat(t.id,'" to miniscroller')),this.updateSlotElementToMiniScroller(t,e)):this.logger.log("[DOM-SCAN][".concat(e.id,']: Miniscroller was not applied because of height/min-height already set for element "').concat(t.id,'"')))},sn.prototype.updateSlotElementToMiniScroller=function(t,e){var i=Bt.getCurrentBreakpoint().name;t.classList.add("fuse-slot-mini-scroller");i=this.templateSettings.maxSlotHeightForBreakpoint(e,i);t.setAttribute("style","min-height: ".concat(i,"px"))},sn);function sn(t,e,i){this.logger=t,this.templateSettings=e,this.browserWindow=i}function on(){}var an=new(on.prototype.getAuctionExecutor=function(){return this.auctionExecutor||(this.auctionExecutor=new Ne(this.getFuseSlotRegistry(),Xt.getPrebidGlobal(),ui.getUam(),I.getLogger(),I.getReporter(),J)),this.auctionExecutor},on.prototype.getFuseSlotRegistry=function(){return this.fuseSlotRegistry||(this.fuseSlotRegistry=new xe(Xt.getPrebidGlobal(),I.getLogger(),I.getReporter(),c.getBrowserWindowObject(),I.getResourceLogger(),Ee.getGptSlotRegistry(),J,Xi.getSlotConditionFactory())),this.fuseSlotRegistry},on.prototype.getAuctionScheduler=function(){var n=this;return this.auctionScheduler||(this.auctionScheduler=new Me(I.getLogger(),c.getBrowserWindowObject(),function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return(t=n.getAuctionExecutor()).executeAuction.apply(t,e)},function(t){return n.getAuctionPlanner().plan(t)},function(t){return n.getFuseSlotRegistry().isDeletedSlot(t)},function(){return Bt.getCurrentBreakpoint().name},J)),this.auctionScheduler},on.prototype.getAuctionPlanner=function(){return this.auctionPlanner||(this.auctionPlanner=new ke(I.getLogger(),J,Ke.getInitManager(),ci.getConsentManger())),this.auctionPlanner},on.prototype.getController=function(){return this.controller||(this.controller=new Ge(this.getFuseSlotRegistry(),I.getLogger(),this.getAuctionScheduler(),J,this.getDomProcessor(),function(){return Ke.getInitManager().isTagInitialised()})),this.controller},on.prototype.getDomProcessor=function(){return this.domProcessor||(this.domProcessor=new en(I.getLogger(),c.getBrowserWindowObject().document,J,this.getFuseSlotFormatter())),this.domProcessor},on.prototype.getFuseSlotFormatter=function(){return this.fuseSlotFormatter||(this.fuseSlotFormatter=new rn(I.getLogger(),J,c.getBrowserWindowObject())),this.fuseSlotFormatter},on),ln=(cn.prototype.getZoneDivId=function(){return"fuse-injected-".concat(this.slot.id,"-").concat(++this.incrementalCounter)},cn.prototype.createSlotElement=function(){return this.toHTML('<div id="'.concat(this.getZoneDivId(),'" data-fuse="').concat(this.slot.id,'" data-fuse-injected-at="').concat((new Date).getTime(),'" class="fuse-slot-').concat(this.type,'"></div>'))},cn.prototype.toHTML=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild},cn.prototype.getFuseSlotHeight=function(){var t=this.responsive.getCurrentBreakpoint().name,e=this.slot.sizeMapping,t=e[t]?e[t].map(function(t){return Number(t[1])}):[];return t.length?Math.max.apply(Math,t):0},cn.prototype.getFuseSlotWidth=function(){var t=this.responsive.getCurrentBreakpoint().name,e=this.slot.sizeMapping,t=e[t]?e[t].map(function(t){return Number(t[0])}):[];return t.length?Math.max.apply(Math,t):0},cn.prototype.getLogContext=function(){return"[".concat(this.type,"][").concat(this.slot.id,"]:")},cn.prototype.getClassName=function(){return"publift-widget-".concat(this.slot.id)},cn.prototype.getContainerElement=function(){return document.querySelector(".".concat(this.getClassName(),"-container"))},cn.prototype.getStylesElement=function(){return document.querySelector("#".concat(this.getClassName(),"-styles"))},cn.prototype.getWidgetElement=function(){return document.querySelector(".".concat(this.getClassName()))},cn);function cn(t,e,i){this.slot=t,this.logger=e,this.responsive=i,this.incrementalCounter=0}var dn,un,pn=this&&this.__extends||(dn=function(t,e){return(dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}dn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),gn=this&&this.__assign||function(){return(gn=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},hn=(pn(bn,un=ln),bn.prototype.createWidget=function(t){var e=this.getClassName();return this.toHTML('\n<div class="'.concat(e,'-container closed" style="display: ').concat(0===t?"none":"block",'">\n<div class="').concat(e,'-container-background">\n</div>\n  <div class="').concat(e,'-button">\n    <div></div>\n    <div></div>\n  </div>\n  <div class="').concat(e,'">\n  </div>\n</div>\n'))},bn.prototype.getHideAtElement=function(){var t=this.getAttributes().hideSelector;return t?document.querySelector(t):null},bn.prototype.getFixedElement=function(){var t=this.getAttributes().fixedSelector;return t?document.querySelector(t):null},bn.prototype.getFixedClass=function(){return"".concat(this.getClassName(),"-fixed")},bn.prototype.getWidgetCloseButtonElement=function(){return document.querySelector(".".concat(this.getClassName(),"-button"))},bn.prototype.makeAttributes=function(){var t=gn({bgColor:"#EFEFEF",bgOpacity:.7,allowClose:!1,buttonColor:"#313131",barColor:"#EFEFEF",borderWidth:"0px",zIndex:2147483647,compact:!1},this.slot.stickyAttributes);return t.compact&&(t.bgOpacity=1,t.bgColor=t.barColor),t},bn.prototype.addContent=function(t,e){var i=this,n=this.getClassName(),r=t.querySelector(".".concat(n)),s=this.createSlotElement();r.appendChild(s),t.querySelector(".".concat(n,"-button")).addEventListener("click",function(){t.classList.contains("closed")?i.onShow():i.onClose(),clearInterval(i.hideAtElementInterval)});n=document.querySelector("body");return n.insertAdjacentElement("beforeend",e),n.insertAdjacentElement("beforeend",t),s},bn.prototype.getButtonStyles=function(t,e,i,n,r){return t?e?"border-radius: 0 0 2px 2px; top: ".concat(i,"px;"):"border-radius: 2px 2px 0 0; top: -20px;":e?"border-radius: 2px 2px 0 0; top: ".concat(n-20+r,"px;"):"border-radius: 0 0 2px 2px; top: 0px;"},bn.prototype.getFixedSelectorStyles=function(t,e,i,n,r){return e?".".concat(t,"-fixed {\n  ").concat(i?"top":"bottom"," : ").concat(n?r:0,"px;\n}\n").concat(e," {\n  transition: ").concat(i?"top":"bottom"," .3s linear;\n}"):""},bn.prototype.createStyles=function(){var t=this.getAttributes(),e=t.zIndex,i=t.compact,n=t.isTop,r=t.isButtonOutside,s=t.bgColor,o=t.bgOpacity,a=t.barColor,l=t.allowClose,c=t.allowReopen,d=t.buttonColor,u=t.fixedSelector,p=t.borderWidth,g=this.getFuseSlotHeight(),h=this.getContainerBordersSize(),b=this.getContainerBorderSize(),f=g+h,m=this.getFuseSlotWidth(),y=m+h,t=c&&r?b:0,h=this.getClassName();return this.toHTML('\n<style id="'.concat(h,'-styles">\n.').concat(h,"-container {\n  z-index: ").concat(e,";\n  position: fixed;\n  ").concat(n?"top: 0":"bottom: 0",";\n  width: ").concat(i?y+"px":"100%",";\n  height: ").concat(f,"px;\n  transition: transform .3s linear, height .3s linear;\n  ").concat(r?"":"overflow: hidden;","\n  visibility: hidden;\n  ").concat(i?"left: 50%; transform: translateX(-50%);":"left: 0;","\n}\n.").concat(h,"-container-background {\n  background-color: ").concat(s,";\n  opacity: ").concat(o,";\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n}\n\n.").concat(h,"-button {\n  width: 40px;\n  margin-left: 2px;\n  height: 20px;\n  background-color: ").concat(a,";\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  display: ").concat(l?"flex":"none",";\n  transition: top .3s linear;\n  ").concat(this.getButtonStyles(r,n,f,g,b),"\n}\n.").concat(h,"-button :first-child, .").concat(h,"-button :last-child  {\n  background-color: ").concat(d,";\n  width: 13px;\n  height: 3px;\n  border-radius: 2px;\n}\n.").concat(h,"-button :first-child {\n  transform: rotate(").concat(n?"-":"","30deg) translateX(2px);\n}\n.").concat(h,"-button :last-child {\n  transform: rotate(").concat(n?"":"-","30deg) translateX(-2px);\n}\n.").concat(h," {\n  width: ").concat(i?m+"px":"100%",";\n  height: ").concat(g,"px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: transform .3s linear, height .3s linear;\n  border").concat(i?"":n?"-bottom":"-top",": ").concat(p," solid ").concat(a,";\n}\n.").concat(h,"-container.closed {\n  ").concat(n?"transform: translateY(-".concat(f-t,"px)").concat(i?" TranslateX(-50%)":"",";"):"height: "+t+"px;","\n}\n.").concat(h,"-container.closed .").concat(h,"-button {\n  ").concat(c?"":"display: none;","\n}\n.").concat(h,"-container.closed .").concat(h,"-button :first-child {\n  transform: rotate(").concat(n?"":"-","30deg) translateX(2px);\n}\n.").concat(h,"-container.closed .").concat(h,"-button :last-child {\n  transform: rotate(").concat(n?"-":"","30deg) translateX(-2px);\n}\n").concat(this.getFixedSelectorStyles(h,u,n,g,f),"\n</style>\n"))},bn.prototype.getContainerBorderSize=function(){var t=this.getAttributes().borderWidth;return Number(t.substring(0,t.length-2))},bn.prototype.getContainerBordersSize=function(){var t=this.getAttributes().compact;return this.getContainerBorderSize()*(t?2:1)},bn.prototype.getAttributes=function(){return this.attributes},bn.prototype.insert=function(){var t=this;this.logger.debug("".concat(this.getLogContext()," add widget"));var e=this.createWidget(this.getFuseSlotHeight()),i=this.createStyles(),i=this.addContent(e,i);return window.requestAnimationFrame(function(){t.show(!0)}),this.getHideAtElement()&&this.setHideAtElementListener(),[i]},bn.prototype.hideAtElementListener=function(){var t=this.getContainerElement(),e=this.getHideAtElement(),i=this.getAttributes().isHideForever;B.checkInView(this.browserWindow,e,1,!1)?t.classList.contains("closed")||(this.hide(),i&&clearInterval(this.hideAtElementInterval)):t.classList.contains("closed")&&this.show()},bn.prototype.setHideAtElementListener=function(){var t=this;this.getHideAtElement()&&(this.hideAtElementInterval=setInterval(function(){t.hideAtElementListener()},500))},bn.prototype.isHideSelectorVisible=function(){var t=this.getHideAtElement();return!(!t||!B.checkInView(this.browserWindow,t,1,!1))},bn.prototype.onBreakpointChange=function(){var t,e,i,n,r=this.getAttributes().compact,s=this.getContainerElement(),o=this.getWidgetElement();o&&(t=this.getFuseSlotHeight(),n=(e=this.getFuseSlotWidth())+(i=this.getContainerBordersSize()),s.style.height=(0===t?0:t+i)+"px",s.style.display=0===t?"none":"block",r&&t&&(s.style.width=n+"px",o.style.width=e+"px"),o.style.height=t+"px",0===t||this.isHideSelectorVisible()?this.updateFixedElement(!0):this.updateFixedElement(),this.getStylesElement().innerHTML=this.createStyles().innerHTML)},bn.prototype.delete=function(){var t=this.getStylesElement(),e=this.getContainerElement();return this.updateFixedElement(!0),!(!t||!e)&&(t.remove(),e.remove(),!0)},bn.prototype.show=function(t){var e=this;void 0===t&&(t=!1);var i=this.slot.id;return this.logger.debug("".concat(this.getLogContext()," showing ").concat(t)),this.loadingByCreative||(t?(this.loadingByCreative=!0,this.gpt.registerSlotOnLoadEndedCallbackAsync(function(t){-1!==t.slot.getSlotElementId().indexOf(i)&&(e.logger.debug("".concat(e.getLogContext()," show widget by creative ").concat(t.slot.getSlotElementId())),e.loadingByCreative=!1,e.isHideSelectorVisible()||e.onShow())})):this.onShow()),!0},bn.prototype.onShow=function(){var e=this,t=this.getContainerElement();t.classList.remove("closed"),t.style.visibility="visible",this.updateFixedElement(),this.apiV3.getSlotsForTemplateId(this.slot.id).forEach(function(t){t&&e.apiV3.enableRefreshByZone(t.creativeDivId)}),this.onShowCloseCallback()},bn.prototype.onClose=function(){var e=this;this.getContainerElement().classList.add("closed"),this.updateFixedElement(!0),this.apiV3.getSlotsForTemplateId(this.slot.id).forEach(function(t){t&&e.apiV3.disableRefreshByZone(t.creativeDivId)}),this.onShowCloseCallback()},bn.prototype.hide=function(){return this.logger.debug("".concat(this.getLogContext()," hiding")),this.onClose(),!0},bn.prototype.updateFixedElement=function(t){void 0===t&&(t=!1),this.logger.debug("".concat(this.getLogContext()," updateFixedElement ").concat(t?"restore":"update"));var e,i=this.getFixedElement();i&&(e=this.getFixedClass(),t?i.classList.remove(e):i.classList.add(e))},bn);function bn(t,e,i,n,r,s,o){var a=un.call(this,t,e,i)||this;return a.slot=t,a.logger=e,a.responsive=i,a.browserWindow=n,a.gpt=r,a.apiV3=s,a.onShowCloseCallback=o,a.loadingByCreative=!1,a.hiddenForever=!1,a.type="sticky",a.attributes=a.makeAttributes(),a}var fn,mn,pn=this&&this.__extends||(fn=function(t,e){return(fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}fn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),yn=this&&this.__assign||function(){return(yn=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Sn=(pn(In,mn=ln),In.prototype.getAttributes=function(){return yn({selector:".adBreak",showBanner:!1,height:"100vh",zIndex:1e7,top:"auto"},this.slot.interscrollerAttributes)},In.prototype.insert=function(){var t=this.getAttributes(),e=t.showBanner,i=t.top,n=t.zIndex,r=t.height,s=t.selector,o=this.getFuseSlotHeight(),a=this.createSlotElement(),t=this.getClassName(),e=e?'<div class="'.concat(t,'-container-message banner_top">Advertisement</div>'):"",e=this.toHTML('\n    <div class="'.concat(t,'-container">\n      ').concat(e,'\n        <div class="').concat(t,'-scroll-clip">\n          <div class="').concat(t,'">').concat(a.outerHTML,"</div>\n        </div>\n    </div>\n  ")),t=this.toHTML('\n  <style id="'.concat(t,'-styles">\n  .').concat(t,"-container {\n    width: 100vw;\n    min-height: ").concat(r,";\n    z-index: ").concat(n,";\n    position: relative;\n    display: ").concat(0===o?"none":"block",";\n  }\n\n  .").concat(t,"-container-message {\n    background-color: black;\n    color: white;\n    padding: .5em;\n    text-align: center;\n    font-family: sans-serif;\n  }\n\n  .").concat(t,"-scroll-clip {\n    position: absolute;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    clip-path: inset(0px);\n    clip: rect(0px, auto, auto, 0px);\n    min-height: ").concat(r,"\n  }\n\n  .").concat(t," {\n    position: fixed;\n    top: ").concat(i,";\n    left: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    bottom: 0;\n    transform: translateZ(0px);\n  }\n  </style>\n  ")),i=document.querySelector("body");if(i){i.insertAdjacentElement("beforeend",t);t=document.querySelector(s);return t?(t.appendChild(e),e.style.marginLeft="-".concat(e.getBoundingClientRect().x,"px")):this.logger.info("".concat(this.getLogContext()," insertionPoint with selector not found: ").concat(s)),[a]}return[]},In.prototype.onBreakpointChange=function(){var t=this.getFuseSlotHeight(),e=this.getContainerElement();e&&(e.style.display=0===t?"none":"block")},In.prototype.delete=function(){var t=this.getStylesElement(),e=this.getContainerElement();return!(!t||!e)&&(t.remove(),e.remove(),!0)},In.prototype.hide=function(){return this.getContainerElement().style.display="none",!0},In.prototype.show=function(){return this.getContainerElement().style.display="block",!0},In);function In(){var t=null!==mn&&mn.apply(this,arguments)||this;return t.type="interscroller",t}var vn,An,xn=((this&&this.__extends||(vn=function(t,e){return(vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}vn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}))(_n,An=ln),_n.prototype.getAttributes=function(){return this.slot.dynamicAttributes},_n.prototype.createElement=function(t,e){void 0===t&&(t=""),void 0===e&&(e="");var i=this.createSlotElement();return t&&t.split(" ").forEach(function(t){return i.classList.add(t)}),e&&(i.style.cssText=e),i},_n.prototype.canBeInserted=function(t){var e=this.getLogContext();if(!t)return this.logger.warn("".concat(e," Selector should be defined")),!1;var i=document.querySelectorAll(t);return i.length?(this.logger.debug("".concat(e," Page has ").concat(i.length," elements suitable for selector ").concat(t)),!0):(this.logger.info("".concat(e," No element with selector ").concat(t," found")),!1)},_n.prototype.notFuseSlot=function(t){return!t||t.getAttribute("data-fuse")!==this.slot.id||(this.logger.debug("".concat(this.getLogContext()," Skip insertion cause slot already inserted")),!1)},_n.prototype.filterNodes=function(t){var e=this.getAttributes(),i=e.skip,n=e.each,r=e.position,s=e.incrementEach,o=[],a=0,l=n;return t.forEach(function(t,e){e+=1;if(i&&e<=i)return!1;if("incontent"!==r&&l){if((e-i-a)%l!=0)return!1;s&&(a+=l,l+=s)}o.push(t)}),o},_n.prototype.getZoneDiv=function(t,e){return(e=void 0===e?!1:e)?t.querySelector("div[data-fuse]"):t},_n.prototype.insert=function(){var l=this,t=this.getAttributes(),e=t.selector,c=t.position,d=t.classNames,u=t.css,p=t.wrapperContent,g=t.repeatHeight;if(!this.canBeInserted(e))return this.logger.debug("".concat(this.getLogContext()," Injection skipped")),[];var e=document.querySelectorAll(e),h=0,b=[];return this.filterNodes(e).forEach(function(t){var e=l.createElement(d,u),i=e;p&&(e=l.wrapElement(e,p));var n=t.nextElementSibling,r=t.parentNode,s=t.previousElementSibling,o=t.lastElementChild;switch(c){case"after":l.notFuseSlot(n)&&(r.insertBefore(e,n),b.push(i));break;case"before":l.notFuseSlot(s)&&(r.insertBefore(e,t),b.push(i));break;case"replace":t.replaceWith(e),b.push(i);break;case"incontent":var a=t.getBoundingClientRect().top+t.getBoundingClientRect().height+document.documentElement.scrollTop,a=Math.floor(a/g);h<a&&(h=a,l.notFuseSlot(n)&&(r.insertBefore(e,n),b.push(i)));break;default:l.notFuseSlot(o)&&(t.appendChild(e),b.push(i))}}),b},_n.prototype.wrapElement=function(t,e){var i=document.createElement("div");return i.innerHTML=e,i.firstElementChild.appendChild(t),i.firstElementChild},_n.prototype.delete=function(){var t=document.querySelectorAll('[data-fuse="'.concat(this.slot.id,'"]'));return t.forEach(function(t){t.remove()}),0<t.length},_n.prototype.hide=function(){throw new Error("Method not implemented.")},_n.prototype.show=function(){throw new Error("Method not implemented.")},_n.prototype.onBreakpointChange=function(){throw new Error("Method not implemented.")},_n);function _n(){var t=null!==An&&An.apply(this,arguments)||this;return t.type="dynamic",t}var Tn=this&&this.__assign||function(){return(Tn=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Cn=(wn.prototype.getStickySlots=function(){var e=this;return this.settings.getFuseSlots().filter(function(t){return t.attributes&&(t.attributes.sticky||e.overrideParams.stickiesParams[t.id])}).map(function(t){return t.attributes.sticky=!0,t.stickyAttributes=Tn(Tn({},t.stickyAttributes),e.overrideParams.stickiesParams[t.id]),t})},wn.prototype.getInterscrollerSlots=function(){var e=this;return this.settings.getFuseSlots().filter(function(t){return t.attributes&&(t.attributes.interscroller||e.overrideParams.interscrollersParams[t.id])}).map(function(t){return t.attributes.interscroller=!0,t.interscrollerAttributes=Tn(Tn({},t.interscrollerAttributes),e.overrideParams.interscrollersParams[t.id]),t})},wn.prototype.getDynamicSlots=function(){var e=this;return this.settings.getFuseSlots().filter(function(t){return t.attributes.dynamic||e.overrideParams.dynamicParams[t.id]}).map(function(t){return t.attributes.dynamic=!0,t.dynamicAttributes=Tn(Tn({},t.dynamicAttributes),e.overrideParams.dynamicParams[t.id]),t})},wn.prototype.isSlotInjected=function(t){return null!==document.querySelector('[data-fuse="'.concat(t.id,'"]'))},wn.prototype.getWidget=function(e){return this.widgets.filter(function(t){return t.slot.id===e.id})[0]},wn.prototype.removeWidget=function(t){var e=this.getWidget(t);return e?(e.delete(),this.logger.debug("[WIDGETS][".concat(t.id,"] Widget deleted")),!0):(this.logger.debug("[WIDGETS][".concat(t.id,"] Widget was not found")),!1)},wn.prototype.cleanup=function(){var e=this;this.getWidgetSlots().forEach(function(t){return e.removeWidget(t)})},wn.prototype.onBreakpointChange=function(){var e=this,t=this.getStickySlots(),i=this.getInterscrollerSlots();this.logger.info("[WIDGETS] onBreakpointChange Stickies: ".concat(t.length," Scrolls: ").concat(i.length)),[].concat(t,i).forEach(function(t){t=e.getWidget(t);t&&t.onBreakpointChange()})},wn.prototype.getWidgetSlots=function(){return[].concat(this.getDynamicSlots(),this.getInterscrollerSlots(),this.getStickySlots())},wn.prototype.getWidgetsWithSelector=function(){return[].concat(this.getDynamicSlots(),this.getInterscrollerSlots())},wn.prototype.insertStyles=function(t){var e=document.createElement("div");e.innerHTML=t,document.querySelector("body").insertAdjacentElement("beforeend",e.firstElementChild)},wn.prototype.cleanupDynamicSlots=function(){this.getDynamicSlots().forEach(function(t){document.querySelectorAll('[data-fuse="'.concat(t.id,'"]')).forEach(function(t){t.remove()})})},wn.prototype.injectWidget=function(t){var e=this;this.logger.debug("[WIDGETS][".concat(t.id,"] Inject widget"));var i=t.attributes,n=i.sticky,r=i.interscroller,s=i.dynamic,o=this.getWidget(t),i=!1;if(!o){if((n||r)&&this.isSlotInjected(t))return void this.logger.debug("[WIDGETS][".concat(t.id,"] Skip injection. DOM element exists"));if(n)o=new hn(t,this.logger,Bt,this.browserWindow,Pt,this.apiV3,function(){e.updateFuseStyles()}),i=t.stickyAttributes.isTop;else if(r)o=new Sn(t,this.logger,Bt);else{if(!s)return void this.logger.warn("[WIDGETS][".concat(t.id,"] Skip injection of unknown widget"));this.logger.debug("[WIDGETS][".concat(t.id,"] Injecting dynamic slot with attributes ").concat(JSON.stringify(t.dynamicAttributes))),o=new xn(t,this.logger,Bt)}this.widgets.push(o)}o.insert().forEach(function(t){e.apiV3.registerZone(t.id)}),i&&this.updateFuseStyles()},wn.prototype.render=function(){var i=this;this.getWidgetSlots().forEach(function(t){var e;!t.insertCondition||!t.insertCondition.type||(e=i.conditionFactory.buildActivator(t.insertCondition,t.id,i.apiV3,function(){i.injectWidget(t)})).checkCondition()?i.injectWidget(t):e.enableTriggers()})},wn.prototype.initConditions=function(){this.inited?this.logger.debug("[WIDGETS] Skipped initialisation as it is already initialised"):(this.logger.debug("[WIDGETS] Init conditions"),this.render(),this.inited=!0)},wn.prototype.getMiniScrollersTopOffset=function(){var t,i=this,n=0;return!this.settings.getTopStickyHeaderSelector()||(t=document.querySelector(this.settings.getTopStickyHeaderSelector()))&&(n+=t.clientHeight,this.logger.debug("[WIDGETS] miniscrollers offset set to ".concat(n," because of topStickyHeader"))),this.getStickySlots().forEach(function(t){var e;!t.stickyAttributes.isTop||(e=i.getWidget(t))&&!e.getContainerElement().classList.contains("closed")&&(n+=i.settings.maxSlotHeightForBreakpoint(t,Bt.getCurrentBreakpoint().name),i.logger.debug("[WIDGETS] miniscrollers offset set to ".concat(n," because of top sticky")))}),n},wn.prototype.injectFuseStyles=function(){var t;this.settings.isMiniScrollersEnabled()&&(document.getElementById("publift-fuse-styles")?this.logger.debug("[WIDGETS] styles already injected"):(this.logger.debug("[WIDGETS] inject fuse styles"),t=this.getMiniScrollersTopOffset(),t="\n      .fuse-slot-mini-scroller .fuse-slot {\n        top: ".concat(0|t,"px;\n        position: sticky !important;\n        overflow: hidden !important;\n      }\n      .fuse-slot-mini-scroller {\n        overflow: initial !important;\n        display: block !important;\n      }\n      "),this.logger.debug("[WIDGETS] injected miniScroller styles"),this.insertStyles('<style id="publift-fuse-styles">'.concat(t,"</style>"))))},wn.prototype.updateFuseStyles=function(){var t=document.getElementById("publift-fuse-styles");t&&t.remove(),this.injectFuseStyles()},wn);function wn(t,e,i,n,r,s){var o=this;this.logger=t,this.settings=e,this.apiV3=i,this.conditionFactory=n,this.browserWindow=r,this.overrideParams=s,this.inited=!1,this.widgets=[],Bt.watchForBreakpoints(function(){return o.onBreakpointChange()})}var En=(kn.prototype.getCurrentBreakpointName=function(){return Bt.getCurrentBreakpoint().name},kn.prototype.getWindow=function(){return this.window},kn.prototype.registerAll=function(){this.logger.debug("[APIV3]: registerAll() started");var t=this.slotsController.registerAndRunAuction(!0,!1,this);this.logger.debug("[APIV3]: registerAll() finished, ".concat(t.length," slots found"))},kn.prototype.processNewSlots=function(){this.registerAll()},kn.prototype.registerZone=function(t){return this.logger.debug("[APIV3]: registerZone(".concat(t,") started")),this.slotsController.registerZoneAndQueue(t,!0,!1,this)},kn.prototype.disableRefreshByZone=function(t){return this.auctionScheduler.disableSlotRefresh(t)},kn.prototype.enableRefreshByZone=function(t){return this.auctionScheduler.enableSlotRefresh(t)},kn.prototype.getSlotsForTemplateId=function(t){return this.slotRegistry.getSlotsForTemplateId(t)},kn);function kn(t,e,i,n,r,s,o,a){this.window=t,this.logger=e,this.settingsGlobal=i,this.slotsController=n,this.slotRegistry=r,this.auctionScheduler=s,this.insertConditionFactory=o,this.slotConditionFactory=a,this.settings=new Rn(this.settingsGlobal)}var Rn=(zn.prototype.getSlotTemplate=function(t){return this.settings.getSlotTemplate(t)},zn.prototype.setDisableWidgetRenderer=function(t){this.settings.getV2CompatOverrides().disableWidgetsRenderer=t},zn.prototype.getLazyDeviceToggle=function(t,e){return this.settings.lazyDeviceToggle(t,e)},zn);function zn(t){this.settings=t}function Dn(t,e){if(t&&e){t=new URL(t),e=new URL(e);return t.hash="",e.hash="",t.toString()==e.toString()}}var Pn=(On.prototype.reset=function(){return this.logger.info("[PAGE]: Resetting all page state"),this.resetPageFn()},On.prototype.pageInit=function(t,e,i){this.logger.info("[API]: pageInit('".concat(t,"', ").concat(e,", ").concat(JSON.stringify(i)));var n=!1;if(null===this.lastInitUrl)if(Dn(t,this.initialUrl)){if(this.anyAuctionStartedFn())return void this.logger.info("[API]: Ignored pageInit(), because the URL hasn't changed since load, and the auction has already run")}else this.logger.info("[API]: First pageInit() call, but the URL has changed since load. Resetting."),this.reset(),n=!0;else{if(n=!0,Dn(t,this.lastInitUrl))return void this.logger.warn("[API]: Ignored pageInit(), because the URL has not changed since the last pageInit call");this.logger.info("[API]: pageInit() called, and the URL has changed. Resetting."),this.reset()}this.lastInitUrl=t,null!=i&&i.pageTargets&&this.setPageTargeting(null==i?void 0:i.pageTargets),null!=i&&i.blockingFuseIds&&this.setBlock(i,n,e),this.registerAndRunAuctionFn()},On.prototype.setBlock=function(t,e,i){var n=(null==t?void 0:t.blockingTimeout)||2e3,i=e?n:n-i;i<=0?this.logger.info("[API][pageInit]: Skipped setting auction block, because there is no time left on the timeout"):this.setAuctionBlockFn(t.blockingFuseIds,i)},On);function On(t,e,i,n,r,s,o){this.logger=t,this.initialUrl=e,this.resetPageFn=i,this.registerAndRunAuctionFn=n,this.anyAuctionStartedFn=r,this.setAuctionBlockFn=s,this.setPageTargeting=o,this.lastInitUrl=null}var Fn=!1,Nn=I.getLogger(),Ln=function(){return c.getBrowserWindowObject().fusetag.que},Gn=function(){return Ln().length},Bn=function(){return Ln().push=function(t){if("function"==typeof t)try{t.call()}catch(t){Nn.error("Error processing command :",t.message,t.stack)}else Nn.error("Commands written into fusetag.que.push must be wrapped in a function")}},Mn={addItem:function(t){Ln().push(t)},processBacklog:function(){if(Fn)Nn.error("[INIT] processBacklog() called, but it already ran");else{for(Fn=!0,Nn.log("[INIT]: Processing fuse queue with ".concat(Ln().length," pending items"));0<Ln().length;){var t=Ln().shift();if("function"==typeof t)try{Nn.debug("[INIT]: Calling queued function"),t.call(),t.called=!0}catch(t){Nn.error("[INIT]: Error calling queued function:",t.message,t.stack)}else Nn.error("[INIT]: Commands written into fusetag.que.push must be wrapped in a function")}Bn()}},clear:function(){Nn.debug("[QUEUE]: Cleared fuse queue with ".concat(Gn()," remaining items")),Ln().splice(0,Ln().length)},queueSize:Gn};function Un(){}var Hn=new(Un.prototype.getApiV3=function(){return this.apiV3||(this.apiV3=new En(c.getBrowserWindowObject(),I.getLogger(),J,an.getController(),an.getFuseSlotRegistry(),an.getAuctionScheduler(),Xi.getInsertConditionFactory(),Xi.getSlotConditionFactory())),this.apiV3},Un.prototype.getPageManager=function(){var t=this;return this.pageManager||(this.pageManager=new Pn(I.getLogger(),c.getBrowserWindowObject().location.href,function(){return t.resetPage()},function(){return an.getController().registerAndRunAuction(!0,!1,t.getApiV3())},function(){return an.getAuctionScheduler().inAnyAuctionExecuted()},function(t,e){return an.getAuctionScheduler().setAuctionBlock(t,e)},function(t){return Jt.setTargetingMultiple(t)})),this.pageManager},Un.prototype.resetPage=function(){Ee.getGptSlotRegistry().purgeAll(),me.reset(),an.getController().reset(),Jt.clearTargeting(),Mn.clear(),yt()},Un),Wn=(jn.prototype.getStatuses=function(){return this.statuses},jn.prototype.start=function(t,e){var n=this;!(e=void 0===e?!1:e)&&this.statuses.length||(this.logger.debug("[WIDGETS][CHECKER] Start to check slots"),this.statuses=t.filter(function(t){var e;return(null===(e=t.dynamicAttributes)||void 0===e?void 0:e.selector)||(null===(t=t.interscrollerAttributes)||void 0===t?void 0:t.selector)}).map(function(t){var e,i=(null===(e=t.dynamicAttributes)||void 0===e?void 0:e.selector)||(null===(i=t.interscrollerAttributes)||void 0===i?void 0:i.selector);return{slot:t,selector:i,countSelector:n.countSelector(i),countSlot:n.countSlot(t.id)}}),this.statuses.length&&(this.checkInterval=setInterval(function(){return n.check()},100)))},jn.prototype.stop=function(){clearInterval(this.checkInterval),this.statuses=[]},jn.prototype.check=function(){var n=this;this.statuses.forEach(function(t){var e=n.countSelector(t.selector),i=n.countSlot(t.slot.id);t.countSelector===e&&t.countSlot===i||(n.logger.debug("[WIDGETS][".concat(t.slot.id,'] Injecting by selector "').concat(t.selector,'" change: selectors ').concat(e," slots ").concat(i)),n.widgetsRenderer.injectWidget(t.slot),t.countSelector=n.countSelector(t.selector),t.countSlot=n.countSlot(t.slot.id))})},jn.prototype.countSelector=function(t){return document.querySelectorAll(t).length},jn.prototype.countSlot=function(t){return document.querySelectorAll('[data-fuse="'.concat(t,'"]')).length},jn);function jn(t,e){this.logger=t,this.widgetsRenderer=e,this.checkInterval=null,this.statuses=[]}function Vn(){}var qn=new(Vn.prototype.getWidgetsRenderer=function(){return this.widgetsRenderer||(this.widgetsRenderer=new Cn(I.getLogger(),J,Hn.getApiV3(),Xi.getInsertConditionFactory(),c.getBrowserWindowObject(),{stickiesParams:P("sticky"),interscrollersParams:P("interscroller"),dynamicParams:P("dynamic")})),this.widgetsRenderer},Vn.prototype.getWidgetsChecker=function(){return this.widgetsChecker||(this.widgetsChecker=new Wn(I.getLogger(),this.getWidgetsRenderer())),this.widgetsChecker},Vn),Kn=this&&this.__assign||function(){return(Kn=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Qn=I.getLogger(),Jn=Ee.getGptSlotRegistry(),Yn=I.getReporter(),Zn=I.getResourceLogger(),Xn=an.getFuseSlotRegistry(),$n=an.getController(),tr=Ke.getInitManager(),er=c.getBrowserWindowObject(),ir="onTagInitialised",nr=new ye([ir],Qn),rr=Hn.getApiV3(),sr=Hn.getPageManager(),or=function(t,e){Qn.log("[API]: loadSlotById(".concat(t,", ").concat(e,")")),(e?$n.registerZoneAndQueue(e,!0,!0,rr):$n.registerAndQueueLastSlotWithFuseId("".concat(t),!0,!0,rr))||Qn.warn("[API]: loadSlotById(".concat(t,", ").concat(e,") failed to register a slot")),$n.runAuction(),Zn.logResources("loadSlotById")},ar=function(t,e,i){Qn.log("[API]: setSlotTargetingById(".concat(t,", ").concat(e,", ").concat(i,") started")),!t||"string"!=typeof t&&"number"!=typeof t||Jn.setSlotTargetingById("".concat(t),e,i)},lr=function(t){if(t&&("string"==typeof t||"number"==typeof t))return Jn.getSlots("".concat(t))};var cr={enableApi:function(t){Qn.debug("[INIT]: Enabling Fuse API"),t.fuseUUID=J.getFuseUUID(),t.initialised=!1,t.init=!1,t.getCurrentBreakpoint=function(){return Bt.getCurrentBreakpoint()},t.pageInit=function(t){return sr.pageInit(er.location.href,Yn.getElapsedTime(),t)},t.registerAll=function(){return $n.registerAndRunAuction(!0,!1,rr)},t.registerZone=function(t){t=null===(t=$n.registerZoneAndQueue(t,!0,!1,rr))||void 0===t?void 0:t.creativeDivId;return t&&$n.runAuction(),t},t.states=Yn.states,t.events=Yn.events,t.setTargeting=function(t,e){return Jt.setTargeting(t,e)},t.onSlotRenderEnded=function(e){return _t(function(t){t={slotId:t.slot.getSlotElementId(),hasCreative:!t.isEmpty,gptEvent:t};e(t)})},t.onTagInitialised=function(t){nr.once(ir,t)},t.onSlotsInitialised=function(t){Xn.getSlotInitEmitter().once(ve,t)},t.onSlotInitialised=function(t){Xn.getSlotInitEmitter().once(Ae,t)},t.privateApi={},t.privateApi.getWidgetRenderer=function(){return qn.getWidgetsRenderer()},t.privateApi.getObservers=function(){return Vt.getObservers()},t.privateApi.getInitStatus=function(){return tr.getInitStatus()},t.privateApi.getSlotProblems=function(){return Yn.getSlotProblems()},t.privateApi.resetPage=function(){return sr.reset()},t.privateApi.runAuctionAllActiveSlots=function(){return $n.runAuctionAllActiveSlots()},t.privateApi.setLogLevel=function(t){return Qn.setLogLevel(t)},t.privateApi.getLogLevel=function(){return Qn.getLogLevel()},t.privateApi.getLogs=function(){return Qn.getLogs()},t.privateApi.getAuctionState=function(){return an.getAuctionExecutor().getStateView()},t.loadSlots=function(){return $n.loadSlots(t,rr,function(){return sr.reset()})},t.getUnits=function(){return Xn.getElements()},t.loadSlotById=function(t,e){return or(t,e)},t.refreshSlots=function(){return $n.runAuctionAllActiveSlots()},t.refreshSlotByCode=function(t){return $n.forceRunAuction(t)},t.getAdSlotsById=function(t){return lr(t)},t.processNewSlots=function(){return $n.registerAndRunAuction(!0,!1,rr)},t.getTargeting=function(){return Jt.getTargeting()},t.getAdSlotsByFuseId=t.getAdSlotsById,t.getFuseSlots=t.getSlots,t.getFuseSettings=t.getSettings,t.getFuseUnits=t.getUnits,t.loadFuseSlots=t.loadSlots,t.resetSlots=function(){return sr.reset()},t.resetFuseSlots=function(){return sr.reset()},t.loadFuseSlotById=t.loadSlotById,t.setSlotTargetingByFuseId=t.setSlotTargetingById,t.setSlotTargetingById=function(t,e,i){return ar(t,e,i)},t.widgetsRenderer=t.privateApi.getWidgetRenderer(),t.setDefaultTargeting=function(){return yt()},t.getRefreshIntervals=function(){return $n.getRefreshIntervals()},t.disableRefresh=function(){return $n.clearRefreshIntervals()},t.getSlots=function(){return Xn.getSlotTemplates()},t.getSettings=function(){return Kn({},J.getAccountSettings())}},tagInitEmitter:nr,ON_TAG_INIT_EVENT:ir},dr=I.getLogger(),ur=I.getReporter(),pr=c.getBrowserWindowObject(),gr={name:"Confiant",url:"//confiant-integrations.global.ssl.fastly.net/ZVeqITFg3t0RVj7Gh41kEbdx9DA/gpt_and_prebid/",file:"config.js"};var hr={enable:function(t){ur.setStateStatus("confiant_load_start"),pr.confiant=pr.confiant||{},A(gr,function(){dr.log("[CONFIANT]: Script loaded"),ur.setStateStatus("confiant_load_finish"),t&&t()})}},br=I.getLogger(),fr=I.getReporter(),mr={name:"Blockthrough",url:"//publift-com.videoplayerhub.com/",file:"galleryplayer.js"};var yr={enable:function(t){fr.setStateStatus("blockthrough_load_start"),A(mr,function(){br.log("[BLOCKTHROUGH]: Tag loaded"),fr.setStateStatus("blockthrough_load_finish"),t&&t()})}};function Sr(e,t,i){try{e.log("[INIT][onFuseLoadCallback] Start"),i.onTagInitialised(()=>{const t=document.getElementsByTagName("body")[0];var e=screen.width;e<="960"&&t&&(t.style.padding="55px 0 0 0"),"960"<e&&t&&(t.style.padding="105px 0 0 0")}),e.debug("[INIT][onFuseLoadCallback] Finish")}catch(t){e.error("[INIT][onFuseLoadCallback] Encountered error during evaluation",t)}}if(null!==(ln=window.self.fusetag)&&void 0!==ln&&ln.loading){var Ir="[FUSE]: Fusetag is already initialising, and may have been included in the page twice";throw console.error(Ir),new Error(Ir)}if(null!==(Ir=window.self.fusetag)&&void 0!==Ir&&Ir.init){Ir="[FUSE]: Fusetag is already initialised, and may have been included in the page twice";throw console.error(Ir),new Error(Ir)}var vr=window.self.fusetag||(window.self.fusetag={que:[]});vr.loading=!0;var Ar=I.getReporter();Ar.setStateStatus("tag_loaded");var xr=I.getLogger();xr.log("[INIT] Initialising with UUID ".concat(J.getFuseUUID()));var _r=ui.getUam(),Tr=ci.getConsentManger(),Cr=an.getController(),wr=an.getAuctionExecutor(),Er=Ke.getInitManager(),kr=qn.getWidgetsRenderer(),Rr=Hn.getApiV3(),zr=I.getTelemetry();function Dr(t,e){t?J.isScanDOMOnPageLoad()?(xr.debug("[INIT]: Running second (".concat(e,") docReady auto-scan and auction")),Ar.setStateStatus("second_autoscan_".concat(e,"_start")),Cr.registerAndRunAuction(!0,!1,Rr),Ar.setStateStatus("second_autoscan_".concat(e,"_finish")),xr.debug("[INIT]: Finished second docReady DOM scan")):xr.debug("[INIT]: Skipped second docReady dom-scan because it is disabled"):Er.setDocReady()}function Pr(){Ar.setStateStatus("fuse_bootstrap_start"),cr.enableApi(vr);var i,n,t,e,r=J.getTagStartCutoffMs(),s=Ar.getElapsedTime();if(!(_(r)||s<r))return xr.warn("[INIT]: Fuse will not show ads because it took ".concat(s,"ms before it began loading")),void Ar.setStateStatus("fuse_bootstrap_finish");J.isCmpRequired()&&(Tr.generateStubs(),Tr.loadVersion(),Er.addCmpDeterminedListener(function(){pt(function(){zt(Tr.isAllowPersonalisation())})})),J.isQuantcastEnabled()&&D(C(),"simulate quantcast load delay",function(){return ci.getQuantcastLoader().load()}),J.isPrebidEnabled()&&(s=J.getPrebidTagStartCutoffMs(),t=Ar.getElapsedTime(),_(s)||t<s?(i=function(){return D(E(),"simulate prebid download delay",function(){Er.setPrebidLoadStart(),me.enable(function(t){t&&Er.setPrebidReady()}),me.pushToPrebidQue(function(){Ar.setStateStatus("prebid_queue_executing"),Er.setPrebidAutoScanRegistrationsComplete()})})},s=Bt.getCurrentBreakpoint().name,J.isPrebidEnabledAtBP(s)?i():Bt.watchForBreakpoints(function(t,e){t&&!Er.isPrebidLoadStarted()&&(xr.info("[INIT]: Prebid is enabled for breakpoint ".concat(e,", loading it now")),i())})):xr.info("[INIT]: Skipping prebid load because fuse took ".concat(t,"ms to begin loading"))),J.isUamEnabled()&&(t=J.getUamTagStartCutoffMs(),a=Ar.getElapsedTime(),_(t)||a<t?(n=function(){return D(k(),"simulate uam download delay",function(){_r.load(J.isCmpRequired())})},t=Bt.getCurrentBreakpoint().name,J.isUamEnabledAtBP(t)?n():Bt.watchForBreakpoints(function(t,e){t&&!Er.isUamLoadStarted()&&(xr.info("[INIT]: UAM is enabled for breakpoint ".concat(e,", loading it now")),n())})):xr.info("[INIT]: Skipping UAM load because fuse took ".concat(a,"ms to begin loading"))),e=function(){Y(Bt.isNotXsBreakpoint()&&J.isBlockthroughEnabled(),function(){return yr.enable()})},D(w(),"simulate gpt init delay",function(){It(e,function(){return Er.setGptReady()})}),pt(function(){Ar.setStateStatus("gpt_queue_start_executing"),Er.setGptAutoScanRegistrationsComplete()}),_t(function(t){return wr.reportOnRenderEndedEvent(t)}),Tt(function(t){return wr.reportOnLoadEvent(t)}),Ct(function(t){return wr.reportSlotResponseReceived(t)}),J.getUseTelemetry()&&wt(function(t){var e=t.slot.getAdUnitPath(),t=null===(t=J.getFuseSlots().filter(function(t){return t.slot===e})[0])||void 0===t?void 0:t.id;t&&zr.recordAdUnitLoad({baseUrl:J.getFuseCDN(),fuseId:J.getFuseId(),adUnitId:t,publicationId:J.getPublicationId()})});var o,a,l=c.getBrowserWindowObject();Y(J.isConfiantEnabled(),function(){return hr.enable()}),Y(J.isIdentityEnabled(),function(){return ne.enable(l)}),Y(J.isResponsiveEnabled(),function(){return Cr.configureResponsive()}),Sr(xr,0,vr,J.getV2CompatOverrides(),Hn.getApiV3()),"complete"===(a=document.readyState)?(xr.info("[INIT]: Document state is already 'complete'"),Dr(!1,a)):(o=!1,"interactive"===a&&(xr.info("[INIT]: Document state is already 'interactive'"),Dr(!(o=!0),a)),document.addEventListener("readystatechange",function(){var t=document.readyState;Ar.setStateStatus("document_readystatechange_".concat(t)),xr.info("[INIT]: Received document '".concat(t,"' listener callback"));var e=o;o=!0,Dr(e,t)})),Er.addInitReadyListener(function(){Ar.setStateStatus("fuse_queue_start"),Mn.processBacklog(),Ar.setStateStatus("fuse_queue_finish"),J.isWidgetRendererEnabled()&&(kr.initConditions(),qn.getWidgetsChecker().start(kr.getWidgetsWithSelector())),kr.injectFuseStyles(),vr.initialised=!0,vr.init=!0,vr.loading=!1,Ar.setStateStatus("tag_initialised"),Er.setTagInitialised(),Ar.setStateStatus("on_tag_init_event_start"),cr.tagInitEmitter.emit(cr.ON_TAG_INIT_EVENT),Ar.setStateStatus("on_tag_init_event_finish"),J.isScanDOMOnPageLoad()?(Ar.setStateStatus("fuse_trigger_auto_auction_start"),Cr.registerAndRunAuction(!0,!1,Rr),Ar.setStateStatus("fuse_trigger_auto_auction_finish")):Cr.runDeferredAuctionIfRequired()}),Ar.setStateStatus("fuse_bootstrap_finish")}D(R("fuseDelayInit"),"simulate slow fuse download",Pr)});
